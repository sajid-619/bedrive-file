import{r as h,bK as et,bm as gt,$ as J,bn as Pt,j as r,c as D,A as be,bS as on,k as ce,g as V,br as ln,f as W,bo as Ge,bQ as cn,bP as Et,m as I,bT as Se,bU as un,bV as pt,bW as vt,R as fe,h as dn,a1 as Re,a6 as ze,aV as Tt,aW as Mt,a4 as ae,bX as fn,bY as hn,bZ as tt,b_ as Z,b$ as He,c0 as Be,c1 as ge,c2 as pe,c3 as De,c4 as Pe,c5 as Nt,d as ye,c6 as $e,i as Oe,c7 as le,c8 as mn,c9 as gn,ca as pn,cb as vn,cc as xn,cd as bn,ce as yn,u as Rt,aR as wn,bI as zt,cf as jn,ah as kn,ai as Cn,T as A,l as nt,Q as st,B as ee,D as Ae,o as at,s as rt,a8 as we,cg as Ee,W as In,ch as Sn,a0 as $t,bH as Dn,ay as Pn,b8 as En,aQ as Ot,ci as Tn,a2 as At,a7 as re,cj as Mn,y as ie,q as Ft,t as Y,ck as Nn,am as Lt,I as Fe,a as Vt,b as Le,S as Rn,x as ot,V as zn,Z as $n,cl as On,aP as An,cm as Fn,cn as Ln,ax as it,K as lt,co as Vn,p as Hn,n as Bn,F as Un,e as Kn,Y as Ht,cp as _n,bx as Xe,cq as Wn,a$ as Yn}from"./main-97137759.js";import{E as qn,C as Gn}from"./Edit-fdaf8b96.js";const ct=h.createContext(null);function Xn(e=!1){h.useEffect(()=>(e?document.documentElement.classList.remove("no-page-overflow"):document.documentElement.classList.add("no-page-overflow"),()=>{document.documentElement.classList.remove("no-page-overflow")}),[e])}function fr({children:e,leftSidenavStatus:n,onLeftSidenavChange:t,rightSidenavStatus:s,initialRightSidenavStatus:a,onRightSidenavChange:o,name:i,leftSidenavCanBeCompact:l,height:u="h-screen",className:d,gridClassName:c="dashboard-grid",blockBodyOverflow:g=!0,...f}){Xn(!g);const m=et("(max-width: 1024px)"),x=h.useMemo(()=>i?gt(`${i}.sidenav.compact`):!1,[i])?"compact":"open",[b,v]=J(n,m?"closed":x,t),w=h.useMemo(()=>{if(m)return"closed";if(a!=null)return a;const y=gt(`${i}.sidenav.right.position`,"open");return y??(a||"closed")},[m,i,a]),[k,S]=J(s,w,o),T=h.useCallback(y=>{S(y),Pt(`${i}.sidenav.right.position`,y)},[S,i]),N=m&&(b==="open"||k==="open");return r.jsx(ct.Provider,{value:{leftSidenavStatus:b,setLeftSidenavStatus:v,rightSidenavStatus:k,setRightSidenavStatus:T,leftSidenavCanBeCompact:l,name:i,isMobileMode:m},children:r.jsxs("div",{...f,className:D("relative isolate",c,d,u),children:[e,r.jsx(be,{children:N&&r.jsx(on,{position:"fixed",onClick:()=>{v("closed"),T("closed")}},"dashboard-underlay")})]})})}function hr({children:e,isScrollable:n=!0}){return h.cloneElement(e,{className:D(e.props.className,n&&"overflow-y-auto stable-scrollbar","dashboard-grid-content")})}function mr({className:e,position:n,children:t,size:s="md",mode:a,overlayPosition:o="fixed",display:i="flex",overflow:l="overflow-hidden",forceClosed:u=!1}){const{isMobileMode:d,leftSidenavStatus:c,setLeftSidenavStatus:g,rightSidenavStatus:f,setRightSidenavStatus:m}=h.useContext(ct),p=n==="left"?c:f,x=d||a==="overlay",b={open:{display:i,width:null},compact:{display:i,width:null},closed:{width:0,transitionEnd:{display:"none"}}},v=Qn(p==="compact"?"compact":s);return r.jsx(ce.div,{variants:b,initial:!1,animate:u?"closed":p,transition:{type:"tween",duration:.15},onClick:w=>{const k=w.target;d&&(k.closest("button")||k.closest("a"))&&(g("closed"),m("closed"))},className:D(e,n==="left"?"dashboard-grid-sidenav-left":"dashboard-grid-sidenav-right","will-change-[width]",l,v,x&&`${o} bottom-0 top-0 z-20 shadow-2xl`,x&&n==="left"&&"left-0",x&&n==="right"&&"right-0"),children:h.cloneElement(t,{className:D(t.props.className,"w-full h-full",p==="compact"&&"compact-scrollbar"),isCompactMode:p==="compact"})})}function Qn(e){switch(e){case"compact":return"w-80";case"sm":return"w-224";case"md":return"w-240";case"lg":return"w-288";default:return e||""}}const Zn=V(r.jsx("path",{d:"M3 18h13v-2H3v2zm0-5h10v-2H3v2zm0-7v2h13V6H3zm18 9.59L17.42 12 21 8.41 19.59 7l-5 5 5 5L21 15.59z"}),"MenuOpenOutlined");function gr({children:e,className:n,hideToggleButton:t,...s}){const{isMobileMode:a,leftSidenavStatus:o,setLeftSidenavStatus:i,name:l,leftSidenavCanBeCompact:u}=h.useContext(ct),d=u&&!a,c=!t&&(a||u),g=()=>{i(o==="open"?"closed":"open")},f=()=>{const m=o==="compact"?"open":"compact";Pt(`${l}.sidenav.compact`,m==="compact"),i(m)};return r.jsx(ln,{className:D("dashboard-grid-navbar",n),border:"border-b",size:"sm",color:"primary",darkModeColor:"bg-alt",toggleButton:c?r.jsx(W,{size:"md",onClick:()=>{d?f():g()},children:r.jsx(Zn,{})}):void 0,...s,children:e})}var H=(e=>(e.Select="select",e.DateRangePicker="dateRangePicker",e.SelectModel="selectModel",e.Input="input",e.BooleanToggle="booleanToggle",e.ChipField="chipField",e.Custom="custom",e))(H||{}),ve=(e=>(e.eq="=",e.ne="!=",e.gt=">",e.gte=">=",e.lt="<",e.lte="<=",e.has="has",e.hasAll="hasAll",e.doesntHave="doesntHave",e.between="between",e))(ve||{});function Bt(e){return e.set({hour:0,minute:0,second:0,millisecond:0})}function K(e){return e.set({hour:24-1,minute:60-1,second:60-1,millisecond:1e3-1})}function Jn(){var t,s,a;const e=(t=Ge())==null?void 0:t.settings.dates.default_timezone,n=((a=(s=Ge())==null?void 0:s.user)==null?void 0:a.timezone)||e||"auto";return!n||n==="auto"?cn():n}const F=Bt(Et(Jn()));var St,Dt;const Ue=((Dt=(St=Ge())==null?void 0:St.i18n)==null?void 0:Dt.language)||"en",ut=[{key:0,label:I("Today"),getRangeValue:()=>({preset:0,start:F,end:K(F)})},{key:1,label:I("Yesterday"),getRangeValue:()=>({preset:1,start:F.subtract({days:1}),end:K(F).subtract({days:1})})},{key:2,label:I("This week"),getRangeValue:()=>({preset:2,start:Se(F,Ue),end:un(K(F),Ue)})},{key:3,label:I("Last week"),getRangeValue:()=>{const e=Se(F,Ue).subtract({days:7});return{preset:3,start:e,end:e.add({days:6})}}},{key:4,label:I("Last 7 days"),getRangeValue:()=>({preset:4,start:F.subtract({days:7}),end:K(F)})},{key:5,label:I("Last 14 days"),getRangeValue:()=>({preset:5,start:F.subtract({days:14}),end:K(F)})},{key:6,label:I("Last 30 days"),getRangeValue:()=>({preset:6,start:F.subtract({days:30}),end:K(F)})},{key:7,label:I("Last 3 months"),getRangeValue:()=>({preset:7,start:F.subtract({months:3}),end:K(F)})},{key:8,label:I("Last 12 months"),getRangeValue:()=>({preset:8,start:F.subtract({months:12}),end:K(F)})},{key:9,label:I("This year"),getRangeValue:()=>({preset:9,start:pt(F),end:vt(K(F))})},{key:10,label:I("Last year"),getRangeValue:()=>({preset:10,start:pt(F).subtract({years:1}),end:vt(K(F)).subtract({years:1})})}],Ut=V(r.jsx("path",{d:"M7 11h2v2H7v-2zm14-5v14c0 1.1-.9 2-2 2H5c-1.11 0-2-.9-2-2l.01-14c0-1.1.88-2 1.99-2h1V2h2v2h8V2h2v2h1c1.1 0 2 .9 2 2zM5 8h14V6H5v2zm14 12V10H5v10h14zm-4-7h2v-2h-2v2zm-4 0h2v-2h-2v2z"}),"DateRangeOutlined"),Kt=fe.forwardRef((e,n)=>{const{children:t,inputProps:s,wrapperProps:a,className:o,autoFocus:i,style:l,onClick:u}=e;return r.jsx("div",{...a,onClick:u,children:r.jsx("div",{...s,role:"group",className:D(o,"flex items-center focus-within:ring focus-within:ring-primary/focus focus-within:border-primary/60"),ref:n,style:l,children:r.jsx(dn,{autoFocus:i,children:t})})})}),dt=fe.forwardRef(({inputRef:e,wrapperProps:n,children:t,onBlur:s,...a},o)=>{const i=Re(a),l=ze(o),{fieldProps:u,inputProps:d}=Tt({...a,focusRef:l,labelElementType:"span"});return i.wrapper=D(i.wrapper,a.disabled&&"pointer-events-none"),r.jsx(Mt,{wrapperProps:ae(n,{onBlur:c=>{l.current.contains(c.relatedTarget)||s==null||s(c)},onClick:()=>{fn(l).focusFirst()}}),fieldClassNames:i,ref:l,...u,children:r.jsx(Kt,{inputProps:d,className:D(i.input,"gap-10"),ref:e,children:t})})});function es(e){return e instanceof hn?"day":"minute"}function Qe(e,n,t){return n!=null&&e.compare(n)<0||t!=null&&e.compare(t)>0}function _t(e,n){const t=tt(),[s,a]=h.useState(!1),o=n.closeDialogOnSelection??!0,i=n.granularity||es(e),l=n.min?Z(n.min,t):void 0,u=n.max?Z(n.max,t):void 0;return{timezone:t,granularity:i,min:l,max:u,calendarIsOpen:s,setCalendarIsOpen:a,closeDialogOnSelection:o}}function ft(){const e=tt();return h.useMemo(()=>Et(e),[e])}function ts(e){var X,E;const n=ft(),[t,s]=h.useState({start:(!e.value||!e.value.start)&&!((X=e.defaultValue)!=null&&X.start),end:(!e.value||!e.value.end)&&!((E=e.defaultValue)!=null&&E.end)}),a=e.onChange,[o,i]=J(e.value?_e(e.value,n):void 0,e.value?void 0:_e(e.defaultValue,n),e.onChange),{min:l,max:u,granularity:d,timezone:c,calendarIsOpen:g,setCalendarIsOpen:f,closeDialogOnSelection:m}=_t(o.start,e),p=h.useCallback(()=>{s({start:!0,end:!0}),i(_e(null,n)),a==null||a(null),f(!1)},[n,i,a,f]),[x,b]=h.useState(null),[v,w]=h.useState(!1),[k,S]=h.useState(o),[T,N]=h.useState(()=>xt(o,u)),y=h.useCallback(C=>{let R=C.start,L=C.end;l&&(R=He(R,l));const B=u?Be(u,L):L;R=Be(R,B);const ke=l?He(l,R):R;return L=He(L,ke),u&&(L=Be(L,u)),{start:Z(R,c),end:Z(L,c)}},[l,u,c]),P=h.useCallback(C=>{const R={...y(C),preset:C.preset};i(R),S(R),N(xt(R,u)),s({start:!1,end:!1})},[i,y,u]),M=h.useCallback(C=>!t.start&&ge(C,k.start)||!t.end&&ge(C,k.end),[k,t]),z=h.useCallback(C=>(v||!t.start&&!t.end)&&C.compare(k.start)>=0&&C.compare(k.end)<=0,[k,t,v]),j=h.useCallback(C=>ge(C,k.start),[k]),O=h.useCallback(C=>ge(C,k.end),[k]),se=h.useCallback((C,R)=>({onPointerEnter:()=>{v&&R&&S(Ke({start:x,end:C,timezone:c}))},onClick:()=>{if(!v)w(!0),b(C),S(Ke({start:C,end:C,timezone:c}));else{const L=Ke({start:Bt(Z(x,c)),end:K(Z(C,c)),timezone:c});w(!1),b(null),P==null||P(L),m&&(f==null||f(!1))}}}),[x,v,P,f,m,c]);return{selectedValue:o,setSelectedValue:P,calendarIsOpen:g,setCalendarIsOpen:f,dayIsActive:M,dayIsHighlighted:z,dayIsRangeStart:j,dayIsRangeEnd:O,getCellProps:se,calendarDates:T,setIsPlaceholder:s,isPlaceholder:t,clear:p,setCalendarDates:N,min:l,max:u,granularity:d,timezone:c,closeDialogOnSelection:m}}function xt(e,n){let t=pe(De(e.start)),s=pe(Pe(e.end));return Nt(t,s)&&(s=Pe(s.add({months:1}))),n&&s.compare(n)>0&&(s=t,t=De(t.subtract({months:1}))),[t,s]}function Ke(e){const n=Z(e.start,e.timezone),t=Z(e.end,e.timezone);return n.compare(t)>0?{start:t,end:n}:{start:n,end:t}}function _e(e,n){return e!=null&&e.start&&(e!=null&&e.end)?e:!(e!=null&&e.start)&&(e!=null&&e.end)?(e.start=e.end.subtract({months:1}),e):!(e!=null&&e.end)&&(e!=null&&e.start)?(e.end=e.start.add({months:1}),e):{start:n,end:n.add({months:1})}}const Wt=V(r.jsx("path",{d:"M16.01 11H4v2h12.01v3L20 12l-3.99-4v3z"}),"ArrowRightAltOutlined");function ns(e,n,t,s){switch(n){case"era":case"year":case"month":case"day":return e.cycle(n,t,{round:n==="year"})}if("hour"in e)switch(n){case"dayPeriod":{const a=e.hour,o=a>=12;return e.set({hour:o?a-12:a+12})}case"hour":case"minute":case"second":return e.cycle(n,t,{round:n!=="hour",hourCycle:s.hour12?12:24})}return e}function ss(e,n,t,s){switch(n){case"day":case"month":case"year":return e.set({[n]:t})}if("hour"in e)switch(n){case"dayPeriod":{const a=e.hour,o=a>=12;return t>=12===o?e:e.set({hour:o?a-12:a+12})}case"hour":if(s.hour12){const o=e.hour>=12;!o&&t===12&&(t=0),o&&t<12&&(t+=12)}case"minute":case"second":return e.set({[n]:t})}return e}const bt={year:5,month:2,day:7,hour:2,minute:15,second:15,dayPeriod:1};function as({segment:e,domProps:n,value:t,onChange:s,isPlaceholder:a,state:{timezone:o,calendarIsOpen:i,setCalendarIsOpen:l}}){const u=ye(),d=h.useRef(""),{localeCode:c}=$e(),g=Oe(),f=le({timeZone:o}),m=h.useMemo(()=>new mn(c,{maximumFractionDigits:0}),[c]),p=y=>{s(ss(t,e.type,y,f.resolvedOptions()))},x=y=>{s(ns(t,e.type,y,f.resolvedOptions()))},b=()=>{if(m.isValidPartialNumber(e.text)){const y=e.text.slice(0,-1),P=m.parse(y);if(y.length===0||P===0){const M=gn(o);e.type in M&&p(M[e.type])}else p(P);d.current=y}else e.type==="dayPeriod"&&x(-1)},v=y=>{var P;if(!(y.ctrlKey||y.metaKey||y.shiftKey||y.altKey)){switch(y.key){case"ArrowLeft":y.preventDefault(),y.stopPropagation(),g.focusPrevious();break;case"ArrowRight":y.preventDefault(),y.stopPropagation(),g.focusNext();break;case"Enter":(P=y.target.closest("form"))==null||P.requestSubmit(),l(!i);break;case"Tab":break;case"Backspace":case"Delete":{y.preventDefault(),y.stopPropagation(),b();break}case"ArrowUp":y.preventDefault(),d.current="",x(1);break;case"ArrowDown":y.preventDefault(),d.current="",x(-1);break;case"PageUp":y.preventDefault(),d.current="",x(bt[e.type]||1);break;case"PageDown":y.preventDefault(),d.current="",x(-(bt[e.type]||1));break;case"Home":y.preventDefault(),d.current="",p(e.maxValue);break;case"End":y.preventDefault(),d.current="",p(e.minValue);break}T(y.key)}},w=le({hour:"numeric",hour12:!0}),k=h.useMemo(()=>{const y=new Date;return y.setHours(0),w.formatToParts(y).find(P=>P.type==="dayPeriod").value},[w]),S=h.useMemo(()=>{const y=new Date;return y.setHours(12),w.formatToParts(y).find(P=>P.type==="dayPeriod").value},[w]),T=y=>{const P=d.current+y;switch(e.type){case"dayPeriod":if(k.toLowerCase().startsWith(y))p(0);else if(S.toLowerCase().startsWith(y))p(12);else break;g.focusNext();break;case"day":case"hour":case"minute":case"second":case"month":case"year":{if(!m.isValidPartialNumber(P))return;let M=m.parse(P),z=M,j=e.minValue===0;if(e.type==="hour"&&f.resolvedOptions().hour12){switch(f.resolvedOptions().hourCycle){case"h11":M>11&&(z=m.parse(y));break;case"h12":j=!1,M>12&&(z=m.parse(y));break}e.value>=12&&M>1&&(M+=12)}else M>e.maxValue&&(z=m.parse(y));if(Number.isNaN(M))return;const O=z!==0||j;O&&p(z),+`${M}0`>e.maxValue||P.length>=String(e.maxValue).length?(d.current="",O&&g.focusNext()):d.current=P;break}}},N=u?{}:{"aria-label":e.type,"aria-valuetext":a?void 0:`${e.value}`,"aria-valuemin":e.minValue,"aria-valuemax":e.maxValue,"aria-valuenow":a?void 0:e.value,tabIndex:0,onKeyDown:v};return r.jsx("div",{...ae(n,{...N,onFocus:y=>{d.current="",y.target.scrollIntoView({block:"nearest"})},onClick:y=>{y.preventDefault(),y.stopPropagation()}}),className:"p-2 outline-none caret-transparent cursor-default rounded focus:bg-primary focus:text-on-primary select-none whitespace-nowrap box-content tabular-nums text-center",children:e.text.padStart(e.minLength,"0")})}function rs({segment:e,domProps:n}){const t=Oe();return r.jsx("div",{...n,onPointerDown:s=>{s.pointerType==="mouse"&&(s.preventDefault(),t.focusNext({from:s.target})||t.focusPrevious({from:s.target}))},"aria-hidden":!0,className:"min-w-4 cursor-default select-none",children:e.text})}function os(e,n,t){switch(n){case"year":return{value:e.year,placeholder:"yyyy",minValue:1,maxValue:e.calendar.getYearsInEra(e)};case"month":return{value:e.month,placeholder:"mm",minValue:vn(e),maxValue:e.calendar.getMonthsInYear(e)};case"day":return{value:e.day,minValue:pn(e),maxValue:e.calendar.getDaysInMonth(e),placeholder:"dd"}}if("hour"in e)switch(n){case"dayPeriod":return{value:e.hour>=12?12:0,minValue:0,maxValue:12,placeholder:"--"};case"hour":if(t.hour12){const s=e.hour>=12;return{value:e.hour,minValue:s?12:0,maxValue:s?23:11,placeholder:"--"}}return{value:e.hour,minValue:0,maxValue:23,placeholder:"--"};case"minute":return{value:e.minute,minValue:0,maxValue:59,placeholder:"--"}}return{}}function xe({segmentProps:e,state:n,value:t,onChange:s,isPlaceholder:a}){const{granularity:o}=n,i=h.useMemo(()=>{const c={year:"numeric",month:"numeric",day:"numeric"};return o==="minute"&&(c.hour="numeric",c.minute="numeric"),c},[o]),l=le(i),u=h.useMemo(()=>t.toDate(),[t]),d=h.useMemo(()=>l.formatToParts(u).map(c=>{const g=os(t,c.type,l.resolvedOptions()),f=a&&c.type!=="literal"?g.placeholder:c.value;return{type:c.type,text:c.value===", "?" ":f,...g,minLength:c.type!=="literal"?String(g.maxValue).length:1}}),[u,l,a,t]);return r.jsx("div",{className:"flex items-center",children:d.map((c,g)=>c.type==="literal"?r.jsx(rs,{domProps:e,segment:c},g):r.jsx(as,{isPlaceholder:a,domProps:e,state:n,value:t,onChange:s,segment:c},g))})}const Yt=V(r.jsx("path",{d:"M15.41 16.59 10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z"}),"KeyboardArrowLeftOutlined"),qt=V(r.jsx("path",{d:"M8.59 16.59 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"}),"KeyboardArrowRightOutlined");function is({date:e,currentMonth:n,state:{dayIsActive:t,dayIsHighlighted:s,dayIsRangeStart:a,dayIsRangeEnd:o,getCellProps:i,timezone:l,min:u,max:d}}){const{localeCode:c}=$e(),g=xn(e,c),f=t(e),m=s(e),p=a(e),x=o(e),b=bn(e,l),v=Nt(e,n),w=Qe(e,u,d);return r.jsxs("div",{role:"button","aria-disabled":w,className:D("w-40 h-40 text-sm relative isolate flex-shrink-0",w&&"text-disabled pointer-events-none",!v&&"invisible pointer-events-none"),...i(e,v),children:[r.jsx("span",{className:D("absolute inset-0 flex items-center justify-center rounded-full w-full h-full select-none z-10 cursor-pointer",!f&&!b&&"hover:bg-hover",f&&"bg-primary text-on-primary font-semibold",b&&!f&&"bg-chip"),children:e.day}),m&&v&&r.jsx("span",{className:D("absolute w-full h-full inset-0 bg-primary/focus",(p||g===0||e.day===1)&&"rounded-l-full",(x||g===6||e.day===n.calendar.getDaysInMonth(n))&&"rounded-r-full")})]})}function ls({startDate:e,state:n,isFirst:t,isLast:s}){const{localeCode:a}=$e(),o=yn(e,a),i=Se(e,a);return r.jsxs("div",{className:"w-280 flex-shrink-0",children:[r.jsx(cs,{isFirst:t,isLast:s,state:n,currentMonth:e}),r.jsxs("div",{className:"block",role:"grid",children:[r.jsx(us,{state:n,startDate:e}),[...new Array(o).keys()].map(l=>r.jsx(ce.div,{className:"flex mb-6",children:[...new Array(7).keys()].map(u=>r.jsx(is,{date:i.add({weeks:l,days:u}),currentMonth:e,state:n},u))},l))]})]})}function cs({currentMonth:e,isFirst:n,isLast:t,state:{calendarDates:s,setCalendarDates:a,timezone:o,min:i,max:l}}){const u=f=>{const m=s.length;let p;f==="forward"?p=s.map(x=>Pe(x.add({months:m}))):p=s.map(x=>Pe(x.subtract({months:m}))),a(p)},d=le({month:"long",year:"numeric",era:e.calendar.identifier!=="gregory"?"long":void 0,calendar:e.calendar.identifier}),c=Qe(e.subtract({days:1}),i,l),g=Qe(De(e.add({months:1})),i,l);return r.jsxs("div",{className:"flex items-center justify-between gap-10",children:[r.jsx(W,{size:"md",className:D("text-muted",!n&&"invisible"),disabled:!n||c,"aria-hidden":!n,onClick:()=>{u("backward")},children:r.jsx(Yt,{})}),r.jsx("div",{className:"text-sm font-semibold select-none",children:d.format(e.toDate(o))}),r.jsx(W,{size:"md",className:D("text-muted",!t&&"invisible"),disabled:!t||g,"aria-hidden":!t,onClick:()=>{u("forward")},children:r.jsx(qt,{})})]})}function us({state:{timezone:e},startDate:n}){const{localeCode:t}=$e(),s=le({weekday:"short"}),a=Se(n,t);return r.jsx("div",{className:"flex",children:[...new Array(7).keys()].map(o=>{const l=a.add({days:o}).toDate(e),u=s.format(l);return r.jsx("div",{className:"w-40 h-40 text-sm font-semibold relative flex-shrink-0",children:r.jsx("div",{className:"absolute flex items-center justify-center w-full h-full select-none",children:u})},o)})})}function Gt({state:e,visibleMonths:n=1}){return ye()&&(n=1),r.jsx(h.Fragment,{children:[...new Array(n).keys()].map(s=>{const a=pe(De(e.calendarDates[s])),o=s===0,i=s===n-1;return r.jsx(ls,{state:e,startDate:a,isFirst:o,isLast:i},s)})})}const Xt=h.memo(({start:e,end:n,options:t,preset:s})=>{const{dates:a}=Rt(),o=tt(),i=le(t||wn[s||(a==null?void 0:a.format)]);if(!e||!n)return null;let l;try{l=i.formatRange(yt(e,o),yt(n,o))}catch{l=""}return r.jsx(h.Fragment,{children:l})},zt);function yt(e,n){return typeof e=="string"?jn(e,n).toDate():"toDate"in e?e.toDate(n):e}function ds({onPresetSelected:e,selectedValue:n}){return r.jsx(kn,{className:"min-w-192",padding:"py-14",dataTestId:"date-range-preset-list",children:ut.map(t=>r.jsx(Cn,{borderRadius:"rounded-none",capitalizeFirst:!0,isSelected:(n==null?void 0:n.preset)===t.key,onSelected:()=>{const s=t.getRangeValue();e(s)},children:r.jsx(A,{...t.label})},t.key))})}function fs(e){return et("(max-width: 1024px)",e)}function hs({state:e,showInlineDatePickerField:n=!1}){const t=fs(),{close:s}=nt(),a=h.useRef(e),o=e.isPlaceholder.start||e.isPlaceholder.end,i=r.jsxs(st,{dividerTop:!0,startAction:!o&&!t?r.jsx("div",{className:"text-xs",children:r.jsx(Xt,{start:e.selectedValue.start.toDate(),end:e.selectedValue.end.toDate(),options:{dateStyle:"medium"}})}):void 0,children:[r.jsx(ee,{variant:"text",size:"xs",onClick:()=>{e.setSelectedValue(a.current.selectedValue),e.setIsPlaceholder(a.current.isPlaceholder),s()},children:r.jsx(A,{message:"Cancel"})}),r.jsx(ee,{variant:"flat",color:"primary",size:"xs",onClick:()=>{s(e.selectedValue)},children:r.jsx(A,{message:"Select"})})]});return r.jsxs(Ae,{size:"auto",children:[r.jsxs(at,{className:"flex",padding:"p-0",children:[!t&&r.jsx(ds,{selectedValue:e.selectedValue,onPresetSelected:l=>{e.setSelectedValue(l),e.closeDialogOnSelection&&s(l)}}),r.jsx(be,{initial:!1,children:r.jsx(ms,{state:e,showInlineDatePickerField:n})})]}),!e.closeDialogOnSelection&&i]})}function ms({state:e,showInlineDatePickerField:n}){return r.jsxs(ce.div,{initial:{width:0,overflow:"hidden"},animate:{width:"auto"},exit:{width:0,overflow:"hidden"},transition:{type:"tween",duration:.125},className:"border-l px-20 pt-10 pb-20",children:[n&&r.jsx(gs,{state:e}),r.jsx("div",{className:"flex items-start gap-36",children:r.jsx(Gt,{state:e,visibleMonths:2})})]})}function gs({state:e}){const{selectedValue:n,setSelectedValue:t}=e;return r.jsxs(dt,{className:"mb-20 mt-10",children:[r.jsx(xe,{state:e,value:n.start,onChange:s=>{t({...n,start:s})}}),r.jsx(Wt,{className:"block flex-shrink-0 text-muted",size:"md"}),r.jsx(xe,{state:e,value:n.end,onChange:s=>{t({...n,end:s})}})]})}function ps(e){var f,m;const{granularity:n,closeDialogOnSelection:t,...s}=e,a=ts(e),o=h.useRef(null),l=ye()&&n!=="day",u=r.jsx(rt,{offset:8,placement:"bottom-start",isOpen:a.calendarIsOpen,onOpenChange:a.setCalendarIsOpen,type:"popover",triggerRef:o,returnFocusToTrigger:!1,moveFocusToDialog:!1,children:r.jsx(hs,{state:a})}),d={onClick:p=>{p.stopPropagation(),p.preventDefault(),vs(p)?a.setCalendarIsOpen(!1):a.setCalendarIsOpen(!0)}},c=a.selectedValue,g=a.setSelectedValue;return r.jsxs(h.Fragment,{children:[r.jsxs(dt,{ref:o,wrapperProps:d,endAdornment:l?void 0:r.jsx(Ut,{}),...s,children:[r.jsx(xe,{isPlaceholder:(f=a.isPlaceholder)==null?void 0:f.start,state:a,segmentProps:d,value:c.start,onChange:p=>{g({start:p,end:c.end})}}),r.jsx(Wt,{className:"block flex-shrink-0 text-muted",size:"md"}),r.jsx(xe,{isPlaceholder:(m=a.isPlaceholder)==null?void 0:m.end,state:a,segmentProps:d,value:c.end,onChange:p=>{g({start:c.start,end:p})}})]}),u]})}function vs(e){return["hour","minute","dayPeriod"].includes(e.currentTarget.ariaLabel||"")}function xs(e){const{field:{onChange:n,onBlur:t,value:s,ref:a},fieldState:{invalid:o,error:i}}=we({name:e.name}),l={onChange:u=>{n(u?Qt(u):null)},onBlur:t,value:bs(s),invalid:o,errorMessage:i==null?void 0:i.message,inputRef:a};return r.jsx(ps,{...ae(l,e)})}function bs(e){const{start:n,end:t,preset:s}=e||{},a={preset:s};try{n&&(a.start=typeof n=="string"?Ee(n):n),t&&(a.end=typeof t=="string"?Ee(t):t)}catch{}return a}function Qt({start:e,end:n,preset:t}={}){const s={preset:t};return e&&(s.start=e.toAbsoluteString()),n&&(s.end=n.toAbsoluteString()),s}function Zt(e){var n;return{...e,defaultOperator:ve.between,control:{type:H.DateRangePicker,defaultValue:((n=e.control)==null?void 0:n.defaultValue)||Qt(ut[3].getRangeValue())}}}function ys(e){return Zt({key:"created_at",label:I("Date created"),...e})}function ws(e){return Zt({key:"updated_at",label:I("Last updated"),...e})}const Ve=h.forwardRef(({className:e,circle:n,size:t="md",src:s,link:a,label:o,fallback:i="generic",lazy:l=!0,...u},d)=>{let c=s?r.jsx("img",{ref:d,src:s,alt:o,loading:l?"lazy":void 0,className:"block h-full w-full object-cover"}):r.jsx("div",{className:"h-full w-full bg-alt dark:bg-chip",children:r.jsx(Sn,{viewBox:"0 0 48 48",className:"h-full w-full text-muted"})});o&&(c=r.jsx($t,{label:o,children:c}));const g={...u,className:D(e,"relative block overflow-hidden select-none flex-shrink-0",js(t),n?"rounded-full":"rounded")};return a?r.jsx(In,{...g,to:a,children:c}):r.jsx("div",{...g,children:c})});function js(e){switch(e){case"xs":return"w-18 h-18";case"sm":return"w-24 h-24";case"md":return"w-32 h-32";case"lg":return"w-40 h-40";case"xl":return"w-60 h-60";default:return e}}const We="filters";function ks(e){if(!e)return[];let n=[];try{n=JSON.parse(atob(decodeURIComponent(e))),n.map(t=>(t.valueKey!=null&&(t.value=t.valueKey),t))}catch{}return n}function Cs(e,n){return!e||(e=n?e.filter(t=>t.value!=="").map(t=>Is(t,n)):e,e=e.filter(t=>!t.isInactive),!e.length)?"":encodeURIComponent(btoa(JSON.stringify(e)))}function Is(e,n){var s;const t=n.find(a=>a.key===e.key);if((t==null?void 0:t.control.type)==="select"){const a=(t.control.options||[]).find(o=>o.key===e.value);if(a)return{...e,value:a.value,valueKey:a.key}}return(s=t==null?void 0:t.extraFilters)!=null&&s.length&&(e.extraFilters=t.extraFilters),e}function Ss(e,n){const[t]=Dn(),s=Pn(),a=t.get(We),o=h.useMemo(()=>{if(!e)return[];const c=ks(a);return(n||[]).forEach(g=>{if(!c.find(f=>f.key===g)){const f=e.find(m=>m.key===g);c.push({key:g,value:f.control.defaultValue,operator:f.defaultOperator,isInactive:!0})}}),c.sort((g,f)=>e.findIndex(m=>m.key===g.key)-e.findIndex(m=>m.key===f.key)),c},[a,n,e]),i=h.useCallback(c=>{const g=[...o];return c.forEach(f=>{const m=typeof f=="object"?f.key:f,p=g.findIndex(x=>x.key===m);p>-1&&g.splice(p,1)}),g},[o]),l=h.useCallback(c=>{const g=Cs(c,e);g?t.set(We,g):t.delete(We),s({search:`?${t}`},{replace:!0})},[e,s,t]),u=h.useCallback(c=>{const f=[...i(c),...c];l(f)},[i,l]),d=h.useCallback(c=>l(i([c])),[i,l]);return{add:u,remove:d,replaceAll:l,decodedFilters:o,encodedFilters:a}}function Te(e){return En()?e.metaKey:e.ctrlKey}function Ds(e){const{cellCount:n,rowCount:t}=e;return{onKeyDown:a=>{switch(a.key){case"ArrowLeft":q(a,{cell:{op:"decrement"}},e);break;case"ArrowRight":q(a,{cell:{op:"increment"}},e);break;case"ArrowUp":q(a,{row:{op:"decrement"}},e);break;case"ArrowDown":q(a,{row:{op:"increment"}},e);break;case"PageUp":q(a,{row:{op:"decrement",count:5}},e);break;case"PageDown":q(a,{row:{op:"increment",count:5}},e);break;case"Tab":Ps(a);break;case"Home":Te(a)?q(a,{row:{op:"decrement",count:t},cell:{op:"decrement",count:n}},e):q(a,{cell:{op:"decrement",count:n}},e);break;case"End":Te(a)?q(a,{row:{op:"increment",count:t},cell:{op:"increment",count:n}},e):q(a,{cell:{op:"increment",count:n}},e);break}}}}function q(e,n,{cellCount:t,rowCount:s}){var p,x,b,v,w,k,S;if(((p=document.activeElement)==null?void 0:p.tagName)==="input")return;e.preventDefault();const a=e.currentTarget,o=e.target.closest("[aria-colindex]");if(!o||!a)return;const i=o.closest("[aria-rowindex]");if(!i)return;let l=parseInt(i.getAttribute("aria-rowindex")),u=parseInt(o.getAttribute("aria-colindex"));if(Number.isNaN(l)||Number.isNaN(u))return;const d=((x=n.row)==null?void 0:x.count)??1;((b=n.row)==null?void 0:b.op)==="increment"?l=Math.min(s,l+d):((v=n.row)==null?void 0:v.op)==="decrement"&&(l=Math.max(1,l-d));const c=((w=n.cell)==null?void 0:w.count)??1;((k=n.cell)==null?void 0:k.op)==="increment"?u=Math.min(t,u+c):((S=n.cell)==null?void 0:S.op)==="decrement"&&(u=Math.max(1,u-c));const g=a.querySelector(`[aria-rowindex="${l}"] [aria-colindex="${u}"]`);if(!g)return;const m=Ot(g).nextNode()||g;o.setAttribute("tabindex","-1"),m.setAttribute("tabindex","0"),m.focus()}function Ps(e){const n=e.currentTarget;if(e.shiftKey)n.focus();else{const t=Ot(n,{tabbable:!0});let s,a;do a=t.lastChild(),a&&(s=a);while(a);s&&!s.contains(document.activeElement)&&Tn(s)}}const G=h.createContext(null);function Jt({index:e,isHeader:n}){const{columns:t,cellHeight:s="h-46"}=h.useContext(G),a=t[e],o=a==null?void 0:a.padding;let i="justify-start";return(a==null?void 0:a.align)==="center"?i="justify-center":(a==null?void 0:a.align)==="end"&&(i="justify-end"),D("flex items-center overflow-hidden whitespace-nowrap overflow-ellipsis outline-none focus-visible:outline focus-visible:outline-offset-2",n?"h-46":s,(a==null?void 0:a.width)??"flex-1",a==null?void 0:a.maxWidth,a==null?void 0:a.minWidth,i,o,a==null?void 0:a.className)}function Es({rowIndex:e,rowIsHovered:n,index:t,item:s,id:a}){const{columns:o}=h.useContext(G),i=o[t],l=h.useMemo(()=>({index:e,isHovered:n,isPlaceholder:s.isPlaceholder}),[e,n,s.isPlaceholder]),u=Jt({index:t,isHeader:!1});return r.jsx("div",{tabIndex:-1,role:"gridcell","aria-colindex":t+1,id:a,className:u,children:r.jsx("div",{className:"overflow-x-hidden overflow-ellipsis min-w-0 w-full",children:i.body(s,l)})})}function Ts({onMoveStart:e,onMove:n,onMoveEnd:t,minimumMovement:s=0,preventDefault:a,stopPropagation:o=!0,onPress:i,onLongPress:l,...u}){const c=h.useRef({lastPosition:{x:0,y:0},started:!1,longPressTriggered:!1}).current,{addGlobalListener:g,removeGlobalListener:f}=At(),m=v=>{!c.el||(e==null?void 0:e(v,c.el))===!1||(c.originalTouchAction=c.el.style.touchAction,c.el.style.touchAction="none",c.originalUserSelect=document.documentElement.style.userSelect,document.documentElement.style.userSelect="none",c.started=!0)},p=v=>{var w;if(v.button===0&&c.id==null){if(c.started=!1,((w=u.onPointerDown)==null?void 0:w.call(u,v))===!1)return;o&&v.stopPropagation(),a&&v.preventDefault(),c.id=v.pointerId,c.el=v.currentTarget,c.lastPosition={x:v.clientX,y:v.clientY},l&&(c.longPressTimer=setTimeout(()=>{l(v,c.el),c.longPressTriggered=!0},400)),(e||n)&&g(window,"pointermove",x,!1),g(window,"pointerup",b,!1),g(window,"pointercancel",b,!1)}},x=v=>{if(v.pointerId===c.id){const w=v.clientX-c.lastPosition.x,k=v.clientY-c.lastPosition.y;(Math.abs(w)>=s||Math.abs(k)>=s)&&!c.started&&m(v),c.started&&(n==null||n(v,w,k),c.lastPosition={x:v.clientX,y:v.clientY})}},b=v=>{var w;if(v.pointerId===c.id){c.longPressTimer&&clearTimeout(c.longPressTimer);const k=c.longPressTriggered;c.longPressTriggered=!1,c.started&&(t==null||t(v)),c.el&&(v.type!=="pointercancel"&&((w=u.onPointerUp)==null||w.call(u,v,c.el),v.target&&c.el.contains(v.target)&&(k?l==null||l(v,c.el):i==null||i(v,c.el))),document.documentElement.style.userSelect=c.originalUserSelect||"",c.el.style.touchAction=c.originalTouchAction||""),c.id=void 0,c.started=!1,f(window,"pointermove",x,!1),f(window,"pointerup",b,!1),f(window,"pointercancel",b,!1)}};return{domProps:{onPointerDown:re(p)}}}function Ms(e){return e.shiftKey||Te(e)}function Ns({index:e,isSelected:n,isHeader:t}){const s=Mn(),a=ye(),{hideBorder:o,enableSelection:i,collapseOnMobile:l}=h.useContext(G);return D("flex gap-x-16 break-inside-avoid outline-none border border-transparent",a&&l&&o?"mb-8 pl-8 pr-0 rounded":"px-16",!o&&"border-b-divider",!o&&e===0&&"border-t-divider",n&&!s&&"bg-primary/selected hover:bg-primary/focus focus-visible:bg-primary/focus",n&&s&&"bg-selected hover:bg-focus focus-visible:bg-focus",!n&&!t&&i&&"focus-visible:bg-focus hover:bg-hover")}const Rs=["button","a","input","select","textarea"];function zs({item:e,index:n,renderAs:t,className:s,style:a}){const{selectedRows:o,columns:i,toggleRow:l,selectRow:u,onAction:d,selectRowOnContextMenu:c,enableSelection:g,selectionStyle:f,hideHeaderRow:m}=h.useContext(G),p=h.useRef(!1),x=o.includes(e.id),[b,v]=h.useState(!1),w=j=>j.target.closest(Rs.join(",")),k=j=>{f==="highlight"&&d&&!p.current&&!w(j)&&(j.preventDefault(),j.stopPropagation(),d(e,n))},S=!!o.length,T=j=>{w(j)||(f==="checkbox"?g&&(S||!d)?l(e):d&&d(e,n):f==="highlight"&&(p.current?g&&S?l(e):d==null||d(e,n):g&&u(e,Ms(j))))},{domProps:N}=Ts({onPointerDown:j=>{p.current=j.pointerType==="touch"},onPress:T,onLongPress:g?()=>{p.current&&l(e)}:void 0}),y=j=>{g&&j.key===" "?(j.preventDefault(),j.stopPropagation(),f==="checkbox"?l(e):u(e)):j.key==="Enter"&&!o.length&&d&&(j.preventDefault(),j.stopPropagation(),d(e,n))},P=j=>{c&&g&&(o.includes(e.id)||u(e)),p.current&&(j.preventDefault(),j.stopPropagation())},M=Ns({index:n,isSelected:x}),z=t||"div";return r.jsx(z,{role:"row","aria-rowindex":n+1+(m?0:1),"aria-selected":x,tabIndex:-1,className:D(s,M),item:z==="div"?void 0:e,onDoubleClick:re(k),onKeyDown:re(y),onContextMenu:re(P),onPointerEnter:re(()=>v(!0)),onPointerLeave:re(()=>v(!1)),style:a,...N,children:i.map((j,O)=>r.jsx(Es,{rowIndex:n,rowIsHovered:b,index:O,item:e},`${e.id}-${j.key}`))})}const $s={key:"checkbox",header:()=>r.jsx(As,{}),align:"center",width:"w-24 flex-shrink-0",body:(e,n)=>n.isPlaceholder?r.jsx(ie,{size:"w-24 h-24",variant:"rect"}):r.jsx(Os,{item:e})};function Os({item:e}){const{selectedRows:n,toggleRow:t}=h.useContext(G);return r.jsx(Ft,{checked:n.includes(e.id),onChange:()=>t(e)})}function As(){const{trans:e}=Y(),{data:n,selectedRows:t,onSelectionChange:s}=h.useContext(G),a=!!n.length&&n.length===t.length,o=!a&&!!t.length;return r.jsx(Ft,{"aria-label":e({message:"Select all"}),isIndeterminate:o,checked:a,onChange:()=>{s(a?[]:n.map(i=>i.id))}})}const Fs=V(r.jsx("path",{d:"m20 12-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"}),"ArrowDownwardOutlined");function Ls({index:e}){const{columns:n,sortDescriptor:t,onSortChange:s,enableSorting:a}=h.useContext(G),o=n[e],i=Jt({index:e,isHeader:!0}),[l,u]=h.useState(!1),d=o.sortingKey||o.key,c=o.allowsSorting&&a,{orderBy:g,orderDir:f}=t||{},m=c&&g===d;let p;m&&f==="asc"?p="ascending":m&&f==="desc"?p="descending":c&&(p="none");const x=()=>{if(!c)return;let w;m&&f==="desc"?w={orderDir:"asc",orderBy:d}:m&&f==="asc"?w={orderBy:void 0,orderDir:void 0}:w={orderDir:"desc",orderBy:d},s==null||s(w)},b=m||l,v={visible:{opacity:1,y:0},hidden:{opacity:0,y:"-25%"}};return r.jsxs("div",{role:"columnheader",tabIndex:-1,"aria-colindex":e+1,"aria-sort":p,className:D(i,"text-muted font-medium text-xs",c&&"cursor-pointer"),onMouseEnter:()=>{u(!0)},onMouseLeave:()=>{u(!1)},onKeyDown:w=>{(w.key===" "||w.key==="Enter")&&(w.preventDefault(),x())},onClick:x,children:[o.hideHeader?r.jsx("div",{className:"sr-only",children:o.header()}):o.header(),r.jsx(be,{children:c&&r.jsx(ce.span,{variants:v,animate:b?"visible":"hidden",initial:!1,transition:{type:"tween"},className:"inline-block ml-6 -mt-2","data-testid":"table-sort-button","aria-hidden":!b,children:r.jsx(Fs,{size:"xs",className:D("text-muted",f==="asc"&&g===d&&"rotate-180 transition-transform")})},"sort-icon")})]})}function Vs(){const{columns:e}=h.useContext(G);return r.jsx("div",{role:"row","aria-rowindex":1,tabIndex:-1,className:"flex gap-x-16 px-16",children:e.map((n,t)=>r.jsx(Ls,{index:t},n.key))})}function pr({className:e,columns:n,collapseOnMobile:t=!0,hideHeaderRow:s=!1,hideBorder:a=!1,data:o,selectedRows:i,defaultSelectedRows:l,onSelectionChange:u,sortDescriptor:d,onSortChange:c,enableSorting:g=!0,onDelete:f,enableSelection:m=!0,selectionStyle:p="checkbox",ariaLabelledBy:x,selectRowOnContextMenu:b,onAction:v,renderRowAs:w,tableBody:k,meta:S,tableRef:T,closeOnInteractOutside:N=!1,cellHeight:y,...P}){const M=ye(),z=!!M&&t;z&&(s=!0,a=!0);const[j,O]=J(i,l||[],u),[se,X]=J(d,void 0,c),E=h.useCallback($=>{const U=[...j];if(!U.includes($.id))U.push($.id);else{const ue=U.indexOf($.id);U.splice(ue,1)}O(U)},[j,O]),C=h.useCallback(($,U)=>{let ue=[];$&&(ue=U?[...j==null?void 0:j.filter(he=>he!==$.id),$.id]:[$.id]),O(ue)},[j,O]),R=h.useMemo(()=>{const $=n.filter(ue=>{const he=ue.visibleInMode||"regular";if(he==="all"||he==="compact"&&z||he==="regular"&&!z)return!0});return m&&p!=="highlight"&&!M&&$.unshift($s),$},[M,n,m,p,z]),L={isCollapsedMode:z,cellHeight:y,hideBorder:a,hideHeaderRow:s,selectedRows:j,onSelectionChange:O,enableSorting:g,enableSelection:m,selectionStyle:p,data:o,columns:R,sortDescriptor:se,onSortChange:X,toggleRow:E,selectRow:C,onAction:v,selectRowOnContextMenu:b,meta:S,collapseOnMobile:t},B=Ds({cellCount:m?R.length+1:R.length,rowCount:o.length+1}),ke={renderRowAs:w};k?k=h.cloneElement(k,ke):k=r.jsx(Hs,{...ke});const mt=ze(T);return Nn({ref:mt,onInteractOutside:$=>{N&&m&&(j!=null&&j.length)&&!$.target.closest('[role="dialog"]')&&O([])}}),r.jsx(G.Provider,{value:L,children:r.jsxs("div",{...ae(P,B,{onKeyDown:$=>{$.key==="Escape"?($.preventDefault(),$.stopPropagation(),j!=null&&j.length&&O([])):$.key==="Delete"?($.preventDefault(),$.stopPropagation(),j!=null&&j.length&&(f==null||f(o.filter(U=>j==null?void 0:j.includes(U.id))))):Te($)&&$.key==="a"&&($.preventDefault(),$.stopPropagation(),m&&O(o.map(U=>U.id)))}}),role:"grid",tabIndex:0,"aria-rowcount":o.length+1,"aria-colcount":R.length+1,ref:mt,"aria-multiselectable":m?!0:void 0,"aria-labelledby":x,className:D(e,"select-none isolate outline-none text-sm focus-visible:ring-2"),children:[!s&&r.jsx(Vs,{}),k]})})}function Hs({renderRowAs:e}){const{data:n}=h.useContext(G);return r.jsx(h.Fragment,{children:n.map((t,s)=>r.jsx(zs,{item:t,index:s,renderAs:e},t.id))})}function Bs({filter:e}){const{trans:n}=Y();return r.jsx(Lt,{size:"sm",name:`${e.key}.value`,selectionMode:"single",showSearchField:e.control.showSearchField,placeholder:e.control.placeholder?n(e.control.placeholder):void 0,searchPlaceholder:e.control.searchPlaceholder?n(e.control.searchPlaceholder):void 0,children:e.control.options.map(t=>r.jsx(Fe,{value:t.key,children:r.jsx(A,{...t.label})},t.key))})}function Us({filter:e}){return r.jsx(xs,{min:e.control.min,max:e.control.max,size:"sm",name:`${e.key}.value`,granularity:"day",closeDialogOnSelection:!0})}const Ks=(e,n="normalized-models")=>{const t=[];return n&&t.push(n),e&&t.push(e),t.join("/")};function _s(e,n,t,s){const a=Ks(e,s);return Vt([a,n],()=>Ws(a,n),{keepPreviousData:!0,...t})}async function Ws(e,n){return Le.get(e,{params:n}).then(t=>t.data)}const Ys=(e,n,t="normalized-models")=>{const s=[];return t&&s.push(t),e&&s.push(e),n&&s.push(n),s.join("/")};function en(e,n,t,s){const a=Ys(e,n,s);return Vt([a,t],()=>qs(a,t),{enabled:e!=null&&n!=null})}async function qs(e,n){return Le.get(e,{params:n}).then(t=>t.data)}function Gs({modelType:e,label:n,className:t,background:s,value:a,defaultValue:o="",placeholder:i=I("Select item..."),searchPlaceholder:l=I("Find an item..."),onChange:u,description:d,errorMessage:c,invalid:g,autoFocus:f,queryParams:m,customEndpoint:p,singleEndpoint:x=p,multipleEndpoint:b=p,disabled:v}){var z;const w=h.useRef(null),[k,S]=h.useState(""),[T,N]=J(a,o,u),y=_s(e,{query:k,...m},null,b),{trans:P}=Y(),M=Re({size:"md"});return T?r.jsxs("div",{className:t,children:[r.jsx("div",{className:M.label,children:n}),r.jsx("div",{className:D("rounded border p-8",s,g&&"border-danger"),children:r.jsx(be,{initial:!1,mode:"wait",children:r.jsx(Xs,{disabled:v,endpoint:x,modelType:e,modelId:T,queryParams:m,onEditClick:()=>{N(""),S(""),requestAnimationFrame(()=>{var j,O;(j=w.current)==null||j.focus(),(O=w.current)==null||O.click()})}})})}),d&&!c&&r.jsx("div",{className:M.description,children:d}),c&&r.jsx("div",{className:M.error,children:c})]}):r.jsx(Rn,{className:t,showSearchField:!0,invalid:g,errorMessage:c,description:d,color:"white",isAsync:!0,background:s,placeholder:P(i),searchPlaceholder:P(l),label:n,isLoading:y.isFetching,items:(z=y.data)==null?void 0:z.results,inputValue:k,onInputValueChange:S,selectionMode:"single",selectedValue:T,onSelectionChange:N,ref:w,autoFocus:f,disabled:v,children:j=>r.jsx(Fe,{value:j.id,description:j.description,startIcon:r.jsx(Ve,{src:j.image}),children:j.name},j.id)})}function Xs({modelType:e,modelId:n,onEditClick:t,endpoint:s,disabled:a,queryParams:o}){const{data:i,isLoading:l}=en(e,n,o,s);return l||!(i!=null&&i.model)?r.jsx(Qs,{},"skeleton"):r.jsxs(ce.div,{className:D("flex items-center gap-10",a&&"pointer-events-none cursor-not-allowed text-disabled"),...ot,children:[i.model.image&&r.jsx(Ve,{src:i.model.image}),r.jsxs("div",{children:[r.jsx("div",{className:"text-sm leading-4",children:i.model.name}),r.jsx("div",{className:"text-xs text-muted",children:i.model.description})]}),r.jsx($t,{label:r.jsx(A,{message:"Change item"}),children:r.jsx(W,{className:"ml-auto text-muted",size:"sm",onClick:t,disabled:a,children:r.jsx(qn,{})})})]},"preview")}function Qs(){return r.jsxs(ce.div,{className:"flex items-center gap-10",...ot,children:[r.jsx(ie,{variant:"rect",size:"w-32 h-32"}),r.jsxs("div",{className:"max-h-[36px] flex-auto",children:[r.jsx(ie,{className:"text-xs"}),r.jsx(ie,{className:"max-h-8 text-xs"})]}),r.jsx(ie,{variant:"icon",size:"w-24 h-24"})]})}function Zs({name:e,...n}){const{field:{onChange:t,value:s=""},fieldState:{invalid:a,error:o}}=we({name:e});return r.jsx(Gs,{value:s,onChange:t,invalid:a,errorMessage:o==null?void 0:o.message,...n})}function Js({filter:e}){return r.jsx(Zs,{name:`${e.key}.value`,modelType:e.control.model})}const tn={"=":I("is"),"!=":I("is not"),">":I("is greater than"),">=":I("is greater than or equal to"),"<":I("is less than"),"<=":I("is less than or equal to"),has:I("Include"),doesntHave:I("Do not include"),between:I("Is between"),hasAll:I("Include all")};function ea({filter:e}){var t;const n=e.control;return r.jsxs(h.Fragment,{children:[r.jsx(Lt,{selectionMode:"single",name:`${e.key}.operator`,className:"mb-14",size:"sm",required:!0,children:(t=e.operators)==null?void 0:t.map(s=>r.jsx(Fe,{value:s,children:r.jsx(A,{...tn[s]})},s))}),r.jsx(zn,{size:"sm",name:`${e.key}.value`,type:e.control.inputType,min:"minValue"in n?n.minValue:void 0,max:"maxValue"in n?n.maxValue:void 0,minLength:"minLength"in n?n.minLength:void 0,maxLength:"maxLength"in n?n.maxLength:void 0,required:!0})]})}function ta({className:e,children:n,size:t,color:s,radius:a,selectable:o}){return r.jsx("div",{className:D(e,"flex items-center gap-8 flex-wrap"),children:h.Children.map(n,i=>{if(h.isValidElement(i))return h.cloneElement(i,{size:t,color:s,selectable:o,radius:a})})})}function Ze(e){return{id:e,name:`${e}`,description:`${e}`}}function na(e,n){const t=h.useRef(null),s=ze(n),{displayWith:a=B=>B.name,validateWith:o,children:i,suggestions:l,isLoading:u,inputValue:d,onInputValueChange:c,onItemSelected:g,placeholder:f,onOpenChange:m,chipSize:p="md",openMenuOnFocus:x=!0,showEmptyMessage:b,value:v,defaultValue:w,onChange:k,valueKey:S,isAsync:T,allowCustomValue:N=!0,showDropdownArrow:y,onChipClick:P,...M}=e,z=Re({...e,flexibleHeight:!0}),[j,O]=ra(e),[se,X]=h.useState(!1),E=r.jsx(it,{isIndeterminate:!0,size:"sm","aria-label":"loading..."}),C=y?r.jsx(lt,{}):null,{fieldProps:R,inputProps:L}=Tt({...M,focusRef:s,endAdornment:u&&se?E:C});return r.jsx(Mt,{fieldClassNames:z,...R,children:r.jsxs(Kt,{ref:t,className:D("flex items-center flex-wrap",z.input),onClick:()=>{var B;(B=s.current)==null||B.focus()},children:[r.jsx(sa,{displayChipUsing:a,onChipClick:P,items:j,setItems:O,chipSize:p}),r.jsx(aa,{showEmptyMessage:b,inputProps:L,inputValue:d,onInputValueChange:c,fieldRef:t,inputRef:s,chips:j,setChips:O,validateWith:o,isLoading:u,suggestions:l,placeholder:f,openMenuOnFocus:x,listboxIsOpen:se,setListboxIsOpen:X,allowCustomValue:N,children:i})]})})}function sa({items:e,setItems:n,displayChipUsing:t,chipSize:s,onChipClick:a}){const o=Oe(),i=h.useCallback(l=>{const u=e.findIndex(c=>c.id===l),d=[...e];return u>-1&&(d.splice(u,1),n(d)),d},[e,n]);return r.jsx(ta,{className:"flex-shrink-0 flex-wrap max-w-full my-8",size:s,selectable:!0,children:e.map(l=>r.jsx($n,{errorMessage:l.errorMessage,adornment:l.image?r.jsx(Ve,{circle:!0,src:l.image}):null,onClick:()=>a==null?void 0:a(l),onRemove:()=>{i(l.id).length?o.focusPrevious({tabbable:!0}):o.focusLast()},children:t(l)},l.id))})}function aa(e){const{inputRef:n,fieldRef:t,validateWith:s,setChips:a,chips:o,suggestions:i,inputProps:l,placeholder:u,openMenuOnFocus:d,listboxIsOpen:c,setListboxIsOpen:g,allowCustomValue:f}=e,m="outline-none text-sm mx-8 my-4 h-30 flex-auto",p=Oe(),x=h.useCallback(E=>{E=(E||[]).filter(C=>{const R=!C||!C.id||!C.name;return!(o.findIndex(B=>B.id===(C==null?void 0:C.id))>-1)&&!R}),E.length&&(s&&(E=E.map(C=>s(C))),a([...o,...E]))},[o,a,s]),b=On({...e,clearInputOnItemSelection:!0,isOpen:c,onOpenChange:g,items:i,selectionMode:"none",role:"listbox",virtualFocus:!0,onItemSelected:E=>{j(E)}}),{state:{activeIndex:v,setActiveIndex:w,isOpen:k,setIsOpen:S,inputValue:T,setInputValue:N},refs:y,listboxId:P,collection:M,onInputChange:z}=b,j=E=>{const C=M.size&&v!=null?[...M.values()][v]:null;C!=null&&C.item?x([C.item]):f&&x([Ze(C?C.value:E)]),N(""),w(null),S(!1)};An(()=>{t.current&&y.reference.current!==t.current&&b.reference(t.current)},[t,b,y]);const{handleTriggerKeyDown:O,handleListboxKeyboardNavigation:se}=Vn(b),X=re(()=>{d&&!k&&S(!0)});return r.jsx(Fn,{listbox:b,mobileOverlay:Ln,onPointerDown:E=>{E.preventDefault()},children:r.jsx("input",{type:"text",className:D(m,"bg-transparent"),placeholder:u,...ae(l,{ref:n,value:T,onChange:z,onPaste:E=>{const R=E.clipboardData.getData("text").match(/([a-zA-Z0-9._-]+@[a-zA-Z0-9._-]+\.[a-zA-Z0-9._-]+)/gi);if(R){E.preventDefault();const L=window.getSelection();L!=null&&L.rangeCount&&(L.deleteFromDocument(),x(R.map(B=>Ze(B))))}},"aria-autocomplete":"list","aria-controls":k?P:void 0,autoComplete:"off",autoCorrect:"off",spellCheck:"false",onKeyDown:E=>{const C=E.target;if(E.key==="Enter"){E.preventDefault(),j(C.value);return}if(E.key==="Escape"&&k&&(S(!1),N("")),E.key==="ArrowUp"&&k&&(v===0||v==null)){w(null);return}if(v!=null&&(E.key==="ArrowLeft"||E.key==="ArrowRight")){E.preventDefault();return}if((E.key==="ArrowLeft"||E.key==="Backspace"||E.key==="Delete")&&C.selectionStart===0&&v==null&&o.length){p.focusPrevious({tabbable:!0});return}O(E)||se(E)},onFocus:X,onClick:X})})})}function ra({onChange:e,value:n,defaultValue:t,valueKey:s}){const a=h.useMemo(()=>wt(n),[n]),o=h.useMemo(()=>wt(t),[t]),i=h.useCallback(l=>{const u=s?l.map(d=>d[s]):l;e==null||e(u)},[e,s]);return J(a||void 0,o||[],i)}function wt(e){if(e!=null)return e.map(n=>typeof n!="object"?Ze(n):n)}const oa=fe.forwardRef(na);function ia({children:e,...n}){const{field:{onChange:t,onBlur:s,value:a=[],ref:o},fieldState:{invalid:i,error:l}}=we({name:n.name}),u={onChange:t,onBlur:s,value:a,invalid:i,errorMessage:l==null?void 0:l.message};return r.jsx(oa,{ref:o,...ae(u,n),children:e})}function la({filter:e}){const{trans:n}=Y();return r.jsx(ia,{size:"sm",name:`${e.key}.value`,valueKey:"id",allowCustomValue:!1,showDropdownArrow:!0,placeholder:e.control.placeholder?n(e.control.placeholder):void 0,displayWith:t=>{var s;return(s=e.control.options.find(a=>a.key===t.id))==null?void 0:s.label.message},suggestions:e.control.options.map(t=>({id:t.key,name:t.label.message})),children:t=>r.jsx(Fe,{value:t.id,children:r.jsx(A,{message:t.name})},t.id)})}const nn=h.forwardRef((e,n)=>{const{isInactive:t,filter:s,...a}=e;return t?r.jsx(ca,{filter:s,...a,ref:n}):r.jsx(ua,{filter:s,...a,ref:n})}),ca=h.forwardRef(({filter:e,...n},t)=>r.jsx(ee,{variant:"outline",size:"xs",color:"paper",radius:"rounded-md",border:"border",ref:t,endIcon:r.jsx(lt,{}),...n,children:r.jsx(A,{...e.label})})),ua=h.forwardRef(({filter:e,children:n,...t},s)=>{const a=e.control.type===H.BooleanToggle;return r.jsxs(ee,{variant:"outline",size:"xs",color:"primary",radius:"rounded-r-md",border:"border-y border-r",endIcon:!a&&r.jsx(lt,{}),ref:s,...t,children:[r.jsx("span",{className:D(!a&&"border-r border-r-primary-light mr-8 pr-8"),children:r.jsx(A,{...e.label})}),n]})});function je(e){const{onValueChange:n,isInactive:t,filter:s,label:a}=e;return r.jsxs(rt,{offset:10,type:"popover",onClose:o=>{o!==void 0&&n(o)},children:[r.jsx(nn,{isInactive:t,filter:s,children:a}),r.jsx(da,{...e})]})}function da({filter:e,panel:n,value:t,operator:s}){const a=Hn({defaultValues:{[e.key]:{value:t,operator:s}}}),{close:o,formId:i}=nt();return r.jsxs(Ae,{size:"xs",children:[r.jsx(Bn,{children:r.jsx(A,{...e.label})}),r.jsx(at,{padding:"px-14 pt-14 pb-4 max-h-288",children:r.jsxs(Un,{form:a,id:i,onSubmit:l=>{o(l[e.key])},children:[e.description&&r.jsx("div",{className:"text-muted text-xs mb-14",children:r.jsx(A,{...e.description})}),n]})}),r.jsx(st,{children:r.jsx(ee,{form:i,type:"submit",variant:"flat",color:"primary",size:"xs",children:r.jsx(A,{message:"Apply"})})})]})}const fa=h.memo(({value:e,...n})=>{const t=Kn(n);return isNaN(e)&&(e=0),r.jsx(h.Fragment,{children:t.format(e)})},zt);function ha(e){switch(e.filter.control.type){case H.DateRangePicker:return r.jsx(ma,{...e});case H.BooleanToggle:return r.jsx(ga,{...e});case H.Select:return r.jsx(pa,{...e});case H.ChipField:return r.jsx(va,{...e});case H.Input:return r.jsx(ba,{...e});case H.SelectModel:return r.jsx(ya,{...e});case H.Custom:const n=e.filter.control.listItem;return r.jsx(n,{...e});default:return null}}function ma(e){const{value:n,filter:t}=e;let s;return n.preset!==void 0?s=r.jsx(A,{...ut[n.preset].label}):s=r.jsx(Xt,{start:new Date(n.start),end:new Date(n.end),options:{dateStyle:"medium"}}),r.jsx(je,{...e,label:s,panel:r.jsx(Us,{filter:t})})}function ga({filter:e,isInactive:n,onValueChange:t}){return r.jsx(nn,{onClick:()=>{t({value:e.control.defaultValue})},filter:e,isInactive:n})}function pa(e){const{filter:n,value:t}=e,s=n.control.options.find(a=>a.key===t);return r.jsx(je,{...e,label:s?r.jsx(A,{...s.label}):null,panel:r.jsx(Bs,{filter:n})})}function va(e){return r.jsx(je,{...e,label:r.jsx(xa,{...e}),panel:r.jsx(la,{filter:e.filter})})}function xa(e){const{trans:n}=Y(),{filter:t,value:s}=e,a=s.map(u=>t.control.options.find(d=>d.key===u)),o=3,i=s.length-o,l=r.jsx(h.Fragment,{children:a.filter(Boolean).slice(0,o).map((u,d)=>{let c="";return d!==0&&(c+=", "),c+=n(u.label),c})});return i>0?r.jsx(A,{message:":names + :count more",values:{names:l,count:i}}):l}function ba(e){const{filter:n,value:t,operator:s}=e,a=s?r.jsx(A,{...tn[s]}):null,o=n.control.inputType==="number"?r.jsx(fa,{value:t}):t;return r.jsx(je,{...e,label:r.jsxs(h.Fragment,{children:[a," ",o]}),panel:r.jsx(ea,{filter:n})})}function ya(e){const{value:n,filter:t}=e,{isLoading:s,data:a}=en(t.control.model,n),o=r.jsxs(h.Fragment,{children:[r.jsx(ie,{variant:"avatar",size:"w-18 h-18 mr-6"}),r.jsx(ie,{variant:"rect",size:"w-50"})]}),i=r.jsxs(h.Fragment,{children:[r.jsx(Ve,{size:"xs",src:a==null?void 0:a.model.image,className:"mr-6"}),a==null?void 0:a.model.name]}),l=s||!a?o:i;return r.jsx(je,{...e,label:l,panel:r.jsx(Js,{filter:t})})}function vr({filters:e,pinnedFilters:n,className:t}){const{decodedFilters:s,remove:a,replaceAll:o}=Ss(e,n);return s.length?r.jsx("div",{className:D("flex items-center gap-6 overflow-x-auto",t),children:s.map((i,l)=>{const u=e.find(c=>c.key===i.key);if(!u)return null;const d=c=>{const g=[...s];g.splice(l,1,{key:u.key,value:c.value,isInactive:!1,operator:c.operator||u.defaultOperator}),o(g)};return r.jsxs("div",{children:[!i.isInactive&&r.jsx(W,{variant:"outline",color:"primary",size:"xs",radius:"rounded-l-md",onClick:()=>{a(i.key)},children:r.jsx(Ht,{})}),r.jsx(ha,{filter:u,isInactive:i.isInactive,value:i.valueKey!=null?i.valueKey:i.value,operator:i.operator,onValueChange:d})]},i.key)})}):null}const xr=V(r.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"AddOutlined"),jt=V(r.jsx("path",{d:"M18 15v3H6v-3H4v3c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-3h-2zm-1-4-1.41-1.41L13 12.17V4h-2v8.17L8.41 9.59 7 11l5 5 5-5z"}),"FileDownloadOutlined");function Je(e,n){const t=document.createElement("a");t.href=e,n&&(t.download=n),document.body.appendChild(t),t.click(),document.body.removeChild(t)}function wa(e){const n=ft(),[t,s]=h.useState(!e.value&&!e.defaultValue),a=e.onChange,[o,i]=J(e.value||n,e.defaultValue||n,a),{min:l,max:u,granularity:d,timezone:c,calendarIsOpen:g,setCalendarIsOpen:f,closeDialogOnSelection:m}=_t(o,e),p=h.useCallback(()=>{s(!0),i(n),a==null||a(null),f(!1)},[n,i,a,f]),[x,b]=h.useState(()=>[pe(o)]),v=h.useCallback(S=>{l&&S.compare(l)<0?S=l:u&&S.compare(u)>0&&(S=u);const T=o?o.set(S):Z(S,c);i(T),b([pe(T)]),s(!1)},[i,l,u,o,c]),w=h.useCallback(S=>!t&&ge(o,S),[o,t]),k=h.useCallback(S=>({onClick:()=>{v==null||v(S),m&&(f==null||f(!1))}}),[v,f,m]);return{selectedValue:o,setSelectedValue:i,calendarIsOpen:g,setCalendarIsOpen:f,dayIsActive:w,dayIsHighlighted:()=>!1,dayIsRangeStart:()=>!1,dayIsRangeEnd:()=>!1,getCellProps:k,calendarDates:x,setCalendarDates:b,isPlaceholder:t,clear:p,setIsPlaceholder:s,min:l,max:u,granularity:d,timezone:c,closeDialogOnSelection:m}}function ja({showCalendarFooter:e,...n}){const t=wa(n),s=h.useRef(null),a=ft(),o=e&&r.jsx(st,{padding:"px-14 pb-14",startAction:r.jsx(ee,{disabled:t.isPlaceholder,variant:"text",color:"primary",onClick:()=>{t.clear()},children:r.jsx(A,{message:"Clear"})}),children:r.jsx(ee,{variant:"text",color:"primary",onClick:()=>{t.setSelectedValue(a),t.setCalendarIsOpen(!1)},children:r.jsx(A,{message:"Today"})})}),i=r.jsx(rt,{offset:8,placement:"bottom-start",isOpen:t.calendarIsOpen,onOpenChange:t.setCalendarIsOpen,type:"popover",triggerRef:s,returnFocusToTrigger:!1,moveFocusToDialog:!1,children:r.jsxs(Ae,{size:"auto",children:[r.jsx(at,{className:"flex items-start gap-40",padding:e?"px-24 pt-20 pb-10":null,children:r.jsx(Gt,{state:t,visibleMonths:1})}),o]})}),l={onClick:u=>{u.stopPropagation(),u.preventDefault(),ka(u)?t.setCalendarIsOpen(!1):t.setCalendarIsOpen(!0)}};return r.jsxs(h.Fragment,{children:[r.jsx(dt,{ref:s,wrapperProps:l,endAdornment:r.jsx(Ut,{className:D(n.disabled&&"text-disabled")}),...n,children:r.jsx(xe,{segmentProps:l,state:t,value:t.selectedValue,onChange:t.setSelectedValue,isPlaceholder:t.isPlaceholder})}),i]})}function br(e){const{min:n,max:t}=e,{trans:s}=Y(),{format:a}=le(),{field:{onChange:o,onBlur:i,value:l=null,ref:u},fieldState:{invalid:d,error:c}}=we({name:e.name,rules:{validate:m=>{if(!m)return;const p=Ee(m);if(n&&p.compare(n)<0)return s({message:"Enter a date after :date",values:{date:a(m)}});if(t&&p.compare(t)>0)return s({message:"Enter a date before :date",values:{date:a(m)}})}}}),g=l?Ee(l):null,f={onChange:m=>{o(m&&m.toAbsoluteString())},onBlur:i,value:g,invalid:d,errorMessage:c==null?void 0:c.message,inputRef:u};return r.jsx(ja,{...ae(f,e)})}function ka(e){return["hour","minute","dayPeriod"].includes(e.currentTarget.ariaLabel||"")}const Ca=fe.forwardRef((e,n)=>{const{children:t,size:s="sm",description:a,className:o,invalid:i,autoFocus:l,errorMessage:u,...d}=e,c=ze(n);_n({autoFocus:l},c);const g=Ia(s),f=Re(e),m=h.useId();return r.jsxs("div",{className:D(o,"isolate"),children:[r.jsxs("label",{className:"flex items-center select-none",children:[r.jsx("input",{...d,type:"checkbox",role:"switch","aria-invalid":i||void 0,"aria-describedby":a?m:void 0,ref:c,"aria-checked":d.checked,className:D(g,!i&&"checked:bg-primary dark:checked:bg-primary-dark checked:border-primary dark:checked:border-primary-dark",i&&"checked:bg-danger checked:border-danger","outline-none cursor-pointer bg-chip border-chip border checked:bg-primary checked:border-primary p-0 overflow-hidden relative rounded-3xl appearance-none transition-colors flex-shrink-0 flex items-center outline-none","before:z-10 before:border before:rounded-3xl before:block before:bg-white before:transition-transform before:translate-x-2","checked:before:border-white","focus-visible:ring",e.disabled&&"opacity-80 cursor-not-allowed")}),t&&r.jsx("span",{className:D(f.size.font,"ml-12",i&&"text-danger",e.disabled&&"text-disabled"),children:t})]}),a&&!u&&r.jsx("div",{id:m,className:f.description,children:a}),u&&r.jsx("div",{id:m,className:f.error,children:u})]})});function yr(e){const{field:{onChange:n,onBlur:t,value:s=!1,ref:a},fieldState:{invalid:o,error:i}}=we({name:e.name}),l={onChange:u=>{u.target.value&&u.target.value!=="on"?n(u.target.checked?u.target.value:!1):n(u)},onBlur:t,checked:!!s,invalid:o,errorMessage:i==null?void 0:i.message,name:e.name};return r.jsx(Ca,{ref:a,...ae(e,l)})}function Ia(e){switch(e){case"xl":return"w-68 h-36 before:w-28 before:h-28 checked:before:translate-x-36";case"lg":return"w-56 h-30 before:w-22 before:h-22 checked:before:translate-x-30";case"md":return"w-46 h-24 before:w-18 before:h-18 checked:before:translate-x-24";case"xs":return"w-30 h-16 before:w-12 before:h-12 checked:before:translate-x-16";default:return"w-38 h-20 before:w-14 before:h-14 checked:before:translate-x-20"}}const wr=V(r.jsx("path",{d:"M16 9v10H8V9h8m-1.5-6h-5l-1 1H5v2h14V4h-3.5l-1-1zM18 7H6v12c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7z"}),"DeleteOutlined"),Q=new Map,Ie=new Map,Sa=new Map,_={status:"inactive"};function Ye({e,rect:n,deltaX:t,deltaY:s}){return{rect:n,x:e.clientX,y:e.clientY,deltaX:t??0,deltaY:s??0,nativeEvent:e}}let sn=null;function kt(e){sn=e}function Da(e){return{left:e.left,top:e.top,width:e.width,height:e.height}}function Pa(e){const n=new IntersectionObserver(t=>{t.forEach(s=>{const{width:a,height:o,left:i,top:l}=s.boundingClientRect,[u,d]=[...e].find(([,g])=>g.ref.current===s.target)||[];if(u==null||d==null)return;const c={width:a,height:o,left:i,top:l};e.set(u,{...d,rect:c})}),n.disconnect()});[...e.values()].forEach(t=>{t.ref.current&&n.observe(t.ref.current)})}function jr({id:e,disabled:n,ref:t,preview:s,hidePreview:a,...o}){const i=h.useRef(null),{addGlobalListener:l,removeAllGlobalListeners:u}=At(),d=h.useRef({lastPosition:{x:0,y:0}}).current,c=h.useRef(o);c.current=o,h.useLayoutEffect(()=>(n?Q.delete(e):Q.set(e,{...Q.get(e),id:e,ref:t,type:c.current.type,getData:c.current.getData}),()=>{Q.delete(e)}),[e,n,c,t]);const g=b=>{Sa.forEach(v=>{var w;v.type===((w=Q.get(e))==null?void 0:w.type)&&b(v)})},f=b=>{var T,N;const v=Q.get(e),w=t.current,k=!i.current||!d.clickedEl||i.current.contains(d.clickedEl);if(sn||!w||!v||!k){b.preventDefault(),b.stopPropagation();return}Pa(Ie),kt("drag"),a&&Ea(b),b.dataTransfer.effectAllowed="move",d.lastPosition={x:b.clientX,y:b.clientY},d.currentRect=Da(w.getBoundingClientRect());const S=Ye({rect:d.currentRect,e:b});s!=null&&s.current&&s.current(v,y=>{b.dataTransfer.setDragImage(y,0,0)}),_.status="dragging",_.dragTargetId=e,t.current&&(t.current.dataset.dragging="true"),(N=(T=c.current).onDragStart)==null||N.call(T,S,v),requestAnimationFrame(()=>{g(y=>{var P;return(P=y.onDragStart)==null?void 0:P.call(y,S,v)})}),l(window,"dragover",m,!0)},m=b=>{var N,y;if(b.preventDefault(),!d.currentRect)return;const v=b.clientX-d.lastPosition.x,w=b.clientY-d.lastPosition.y,k={...d.currentRect,left:d.currentRect.left+v,top:d.currentRect.top+w},S=Ye({rect:k,e:b,deltaX:v,deltaY:w}),T=Q.get(e);T&&((y=(N=c.current).onDragMove)==null||y.call(N,S,T),g(P=>{var M;return(M=P.onDragMove)==null?void 0:M.call(P,S,T)})),d.lastPosition={x:b.clientX,y:b.clientY},d.currentRect=k};return{draggableProps:{draggable:!n,onDragStart:f,onDragEnd:b=>{var k,S;if(u(),!d.currentRect)return;kt(null),oe&&oe.remove();const v=Ye({rect:d.currentRect,e:b}),w=Q.get(e);w&&((S=(k=c.current).onDragEnd)==null||S.call(k,v,w),g(T=>{var N;return(N=T.onDragEnd)==null?void 0:N.call(T,v,w,_.status)})),requestAnimationFrame(()=>{_.dragTargetId=void 0,_.status="inactive",t.current&&delete t.current.dataset.dragging})},onPointerDown:b=>{d.clickedEl=b.target}},dragHandleRef:i}}let oe;function Ea(e){oe||(oe=new Image,document.body.append(oe),oe.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="),e.dataTransfer.setDragImage(oe,0,0)}async function*Ta(e){for(const n of e.items)if(n.kind==="file")if(typeof n.webkitGetAsEntry=="function"){const t=n.webkitGetAsEntry();if(!t)continue;if(t.isFile){if(t.name===".DS_Store")continue;yield new Xe(n.getAsFile(),t.fullPath)}else t.isDirectory&&(yield*an(t))}else{const t=n.getAsFile();if(!t||t.name===".DS_Store")continue;yield new Xe(t,n.fullPath)}}async function*an(e){const n=e.createReader();let t;do{t=await new Promise((s,a)=>{n.readEntries(s,a)});for(const s of t)if(s.isFile){if(s.name===".DS_Store")continue;const a=await Ma(s);yield new Xe(a,s.fullPath)}else s.isDirectory&&(yield*an(s))}while(t.length>0)}function Ma(e){return new Promise((n,t)=>e.file(n,t))}async function Na(e){const n=[];for await(const t of e)n.push(t);return n}const Ra=400;function kr({id:e,disabled:n,ref:t,...s}){const a=h.useRef({dragOverElements:new Set,dropActivateTimer:void 0}).current,o=h.useRef(s);o.current=s,h.useLayoutEffect(()=>(Ie.set(e,{...Ie.get(e),disabled:n,id:e,ref:t}),()=>{Ie.delete(e)}),[e,o,n,t]);const i=f=>{var x;const m=o.current,p=m.allowDragEventsFromItself||t.current!==((x=f.ref)==null?void 0:x.current);return!!(f!=null&&f.type&&p&&m.types.includes(f.type)&&(!m.acceptsDrop||m.acceptsDrop(f)))},l=f=>{var p,x;const m=me(f);m&&((x=(p=o.current).onDragLeave)==null||x.call(p,m))};return{droppableProps:n?{}:{onDragOver:f=>{var p,x;f.preventDefault(),f.stopPropagation();const m=me(f);m&&i(m)&&((x=(p=o.current).onDragOver)==null||x.call(p,m,f))},onDragEnter:f=>{var p,x;if(f.stopPropagation(),a.dragOverElements.add(f.target),a.dragOverElements.size>1)return;const m=me(f);m&&i(m)&&((x=(p=o.current).onDragEnter)==null||x.call(p,m),clearTimeout(a.dropActivateTimer),typeof o.current.onDropActivate=="function"&&(a.dropActivateTimer=setTimeout(()=>{var b,v;m&&((v=(b=o.current).onDropActivate)==null||v.call(b,m))},Ra)))},onDragLeave:f=>{f.stopPropagation(),a.dragOverElements.delete(f.target);for(const p of a.dragOverElements)f.currentTarget.contains(p)||a.dragOverElements.delete(p);if(a.dragOverElements.size>0)return;const m=me(f);m&&i(m)&&(l(f),clearTimeout(a.dropActivateTimer))},onDrop:async f=>{var p,x,b,v;f.preventDefault(),f.stopPropagation(),a.dragOverElements.clear(),l(f),clearTimeout(a.dropActivateTimer);const m=me(f);if(m)if((x=(p=o.current).onDragLeave)==null||x.call(p,m),!i(m))_.status!=="inactive"&&(_.status="dropFail");else{const w=(v=(b=o.current).onDrop)==null?void 0:v.call(b,m);_.status!=="inactive"&&(_.status=w===!1?"dropFail":"dropSuccess")}}}}}function me(e){if(_.dragTargetId!=null)return Q.get(_.dragTargetId);if(e.dataTransfer.types.includes("Files"))return{type:"nativeFile",el:null,ref:null,getData:()=>Na(Ta(e.dataTransfer))}}const za="user",Cr=V(r.jsx("path",{d:"M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5zm-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-2zm-3-4h8v2H8z"}),"LinkOutlined"),Ir=V(r.jsx("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreVertOutlined");/**
 * react-virtual
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Me(){return Me=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Me.apply(this,arguments)}/**
 * virtual-core
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ne(){return Ne=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Ne.apply(this,arguments)}/**
 * virtual-core
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function de(e,n,t){var s,a=(s=t.initialDeps)!=null?s:[],o;return function(){var i;t.key&&t.debug!=null&&t.debug()&&(i=Date.now());var l=e(),u=l.length!==a.length||l.some(function(p,x){return a[x]!==p});if(!u)return o;a=l;var d;if(t.key&&t.debug!=null&&t.debug()&&(d=Date.now()),o=n.apply(void 0,l),t.key&&t.debug!=null&&t.debug()){var c=Math.round((Date.now()-i)*100)/100,g=Math.round((Date.now()-d)*100)/100,f=g/16,m=function(x,b){for(x=String(x);x.length<b;)x=" "+x;return x};console.info("%c "+m(g,5)+" /"+m(c,5)+" ms",`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(`+Math.max(0,Math.min(120-120*f,120))+"deg 100% 31%);",t==null?void 0:t.key)}return t==null||t.onChange==null||t.onChange(o),o}}function Ce(e,n){if(e===void 0)throw new Error("Unexpected undefined"+(n?": "+n:""));return e}var $a=function(n,t){return Math.abs(n-t)<1};/**
 * virtual-core
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Oa=function(n){return n},Aa=function(n){for(var t=Math.max(n.startIndex-n.overscan,0),s=Math.min(n.endIndex+n.overscan,n.count-1),a=[],o=t;o<=s;o++)a.push(o);return a},Fa=function(n,t){var s=n.scrollElement;if(s){var a=function(l){var u=l.width,d=l.height;t({width:Math.round(u),height:Math.round(d)})};a(s.getBoundingClientRect());var o=new ResizeObserver(function(i){var l=i[0];if(l!=null&&l.borderBoxSize){var u=l.borderBoxSize[0];if(u){a({width:u.inlineSize,height:u.blockSize});return}}a(s.getBoundingClientRect())});return o.observe(s,{box:"border-box"}),function(){o.unobserve(s)}}},La=function(n,t){var s=n.scrollElement;if(s){var a=function(){t(s[n.options.horizontal?"scrollLeft":"scrollTop"])};return a(),s.addEventListener("scroll",a,{passive:!0}),function(){s.removeEventListener("scroll",a)}}},Va=function(n,t,s){if(t!=null&&t.borderBoxSize){var a=t.borderBoxSize[0];if(a){var o=Math.round(a[s.options.horizontal?"inlineSize":"blockSize"]);return o}}return Math.round(n.getBoundingClientRect()[s.options.horizontal?"width":"height"])},Ha=function(n,t,s){var a,o,i=t.adjustments,l=i===void 0?0:i,u=t.behavior,d=n+l;(a=s.scrollElement)==null||a.scrollTo==null||a.scrollTo((o={},o[s.options.horizontal?"left":"top"]=d,o.behavior=u,o))},Ba=function(n){var t=this;this.unsubs=[],this.scrollElement=null,this.isScrolling=!1,this.isScrollingTimeoutId=null,this.scrollToIndexTimeoutId=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollDirection=null,this.scrollAdjustments=0,this.measureElementCache=new Map,this.observer=function(){var s=null,a=function(){return s||(typeof ResizeObserver<"u"?s=new ResizeObserver(function(i){i.forEach(function(l){t._measureElement(l.target,l)})}):null)};return{disconnect:function(){var i;return(i=a())==null?void 0:i.disconnect()},observe:function(i){var l;return(l=a())==null?void 0:l.observe(i,{box:"border-box"})},unobserve:function(i){var l;return(l=a())==null?void 0:l.unobserve(i)}}}(),this.range={startIndex:0,endIndex:0},this.setOptions=function(s){Object.entries(s).forEach(function(a){var o=a[0],i=a[1];typeof i>"u"&&delete s[o]}),t.options=Ne({debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:Oa,rangeExtractor:Aa,onChange:function(){},measureElement:Va,initialRect:{width:0,height:0},scrollMargin:0,scrollingDelay:150,indexAttribute:"data-index",elementKeyAttribute:"data-element-key",initialMeasurementsCache:[],lanes:1},s)},this.notify=function(){t.options.onChange==null||t.options.onChange(t)},this.cleanup=function(){t.unsubs.filter(Boolean).forEach(function(s){return s()}),t.unsubs=[],t.scrollElement=null},this._didMount=function(){return t.measureElementCache.forEach(t.observer.observe),function(){t.observer.disconnect(),t.cleanup()}},this._willUpdate=function(){var s=t.options.getScrollElement();t.scrollElement!==s&&(t.cleanup(),t.scrollElement=s,t._scrollToOffset(t.scrollOffset,{adjustments:void 0,behavior:void 0}),t.unsubs.push(t.options.observeElementRect(t,function(a){var o=t.scrollRect;t.scrollRect=a,(t.options.horizontal?a.width!==o.width:a.height!==o.height)&&t.maybeNotify()})),t.unsubs.push(t.options.observeElementOffset(t,function(a){t.scrollAdjustments=0,t.scrollOffset!==a&&(t.isScrollingTimeoutId!==null&&(clearTimeout(t.isScrollingTimeoutId),t.isScrollingTimeoutId=null),t.isScrolling=!0,t.scrollDirection=t.scrollOffset<a?"forward":"backward",t.scrollOffset=a,t.maybeNotify(),t.isScrollingTimeoutId=setTimeout(function(){t.isScrollingTimeoutId=null,t.isScrolling=!1,t.scrollDirection=null,t.maybeNotify()},t.options.scrollingDelay))})))},this.getSize=function(){return t.scrollRect[t.options.horizontal?"width":"height"]},this.memoOptions=de(function(){return[t.options.count,t.options.paddingStart,t.options.scrollMargin,t.options.getItemKey]},function(s,a,o,i){return t.pendingMeasuredCacheIndexes=[],{count:s,paddingStart:a,scrollMargin:o,getItemKey:i}},{key:!1}),this.getFurthestMeasurement=function(s,a){for(var o=new Map,i=new Map,l=a-1;l>=0;l--){var u=s[l];if(!o.has(u.lane)){var d=i.get(u.lane);if(d==null||u.end>d.end?i.set(u.lane,u):u.end<d.end&&o.set(u.lane,!0),o.size===t.options.lanes)break}}return i.size===t.options.lanes?Array.from(i.values()).sort(function(c,g){return c.end-g.end})[0]:void 0},this.getMeasurements=de(function(){return[t.memoOptions(),t.itemSizeCache]},function(s,a){var o=s.count,i=s.paddingStart,l=s.scrollMargin,u=s.getItemKey,d=t.pendingMeasuredCacheIndexes.length>0?Math.min.apply(Math,t.pendingMeasuredCacheIndexes):0;t.pendingMeasuredCacheIndexes=[];for(var c=t.measurementsCache.slice(0,d),g=d;g<o;g++){var f=u(g),m=t.options.lanes===1?c[g-1]:t.getFurthestMeasurement(c,g),p=m?m.end:i+l,x=a.get(f),b=typeof x=="number"?x:t.options.estimateSize(g),v=p+b,w=m?m.lane:g%t.options.lanes;c[g]={index:g,start:p,size:b,end:v,key:f,lane:w}}return t.measurementsCache=c,c},{key:!1,debug:function(){return t.options.debug}}),this.calculateRange=de(function(){return[t.getMeasurements(),t.getSize(),t.scrollOffset]},function(s,a,o){return t.range=Ua({measurements:s,outerSize:a,scrollOffset:o})},{key:!1,debug:function(){return t.options.debug}}),this.maybeNotify=de(function(){var s=t.calculateRange();return[s.startIndex,s.endIndex,t.isScrolling]},function(){t.notify()},{key:!1,debug:function(){return t.options.debug},initialDeps:[this.range.startIndex,this.range.endIndex,this.isScrolling]}),this.getIndexes=de(function(){return[t.options.rangeExtractor,t.calculateRange(),t.options.overscan,t.options.count]},function(s,a,o,i){return s(Ne({},a,{overscan:o,count:i}))},{key:!1,debug:function(){return t.options.debug}}),this.indexFromElement=function(s){var a=t.options.indexAttribute,o=s.getAttribute(a);return o?parseInt(o,10):(console.warn("Missing attribute name '"+a+"={index}' on measured element."),-1)},this._measureElement=function(s,a){var o,i=t.indexFromElement(s),l=Ce(t.measurementsCache[i]),u=(o=s.getAttribute(t.options.elementKeyAttribute))!=null?o:l.key,d=t.measureElementCache.get(u);if(!s.isConnected){t.observer.unobserve(s),s===d&&t.measureElementCache.delete(u);return}d!==s&&(d&&t.observer.unobserve(d),t.observer.observe(s),t.measureElementCache.set(u,s));var c=t.options.measureElement(s,a,t);t.resizeItem(i,c)},this.resizeItem=function(s,a){var o,i=t.measurementsCache[s];if(i){var l=(o=t.itemSizeCache.get(i.key))!=null?o:i.size,u=a-l;u!==0&&(i.start<t.scrollOffset&&t._scrollToOffset(t.scrollOffset,{adjustments:t.scrollAdjustments+=u,behavior:void 0}),t.pendingMeasuredCacheIndexes.push(s),t.itemSizeCache=new Map(t.itemSizeCache.set(i.key,a)),t.notify())}},this.measureElement=function(s){s&&t._measureElement(s,void 0)},this.getVirtualItems=de(function(){return[t.getIndexes(),t.getMeasurements()]},function(s,a){for(var o=[],i=0,l=s.length;i<l;i++){var u=s[i],d=a[u];o.push(d)}return o},{key:!1,debug:function(){return t.options.debug}}),this.getVirtualItemForOffset=function(s){var a=t.getMeasurements();return Ce(a[rn(0,a.length-1,function(o){return Ce(a[o]).start},s)])},this.getOffsetForAlignment=function(s,a){var o=t.getSize();a==="auto"&&(s<=t.scrollOffset?a="start":s>=t.scrollOffset+o?a="end":a="start"),a==="start"?s=s:a==="end"?s=s-o:a==="center"&&(s=s-o/2);var i=t.options.horizontal?"scrollWidth":"scrollHeight",l=t.scrollElement?"document"in t.scrollElement?t.scrollElement.document.documentElement[i]:t.scrollElement[i]:0,u=l-t.getSize();return Math.max(Math.min(u,s),0)},this.getOffsetForIndex=function(s,a){a===void 0&&(a="auto"),s=Math.max(0,Math.min(s,t.options.count-1));var o=Ce(t.getMeasurements()[s]);if(a==="auto")if(o.end>=t.scrollOffset+t.getSize()-t.options.scrollPaddingEnd)a="end";else if(o.start<=t.scrollOffset+t.options.scrollPaddingStart)a="start";else return[t.scrollOffset,a];var i=a==="end"?o.end+t.options.scrollPaddingEnd:o.start-t.options.scrollPaddingStart;return[t.getOffsetForAlignment(i,a),a]},this.isDynamicMode=function(){return t.measureElementCache.size>0},this.cancelScrollToIndex=function(){t.scrollToIndexTimeoutId!==null&&(clearTimeout(t.scrollToIndexTimeoutId),t.scrollToIndexTimeoutId=null)},this.scrollToOffset=function(s,a){var o=a===void 0?{}:a,i=o.align,l=i===void 0?"start":i,u=o.behavior;t.cancelScrollToIndex(),u==="smooth"&&t.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),t._scrollToOffset(t.getOffsetForAlignment(s,l),{adjustments:void 0,behavior:u})},this.scrollToIndex=function(s,a){var o=a===void 0?{}:a,i=o.align,l=i===void 0?"auto":i,u=o.behavior;s=Math.max(0,Math.min(s,t.options.count-1)),t.cancelScrollToIndex(),u==="smooth"&&t.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size.");var d=t.getOffsetForIndex(s,l),c=d[0],g=d[1];t._scrollToOffset(c,{adjustments:void 0,behavior:u}),u!=="smooth"&&t.isDynamicMode()&&(t.scrollToIndexTimeoutId=setTimeout(function(){t.scrollToIndexTimeoutId=null;var f=t.measureElementCache.has(t.options.getItemKey(s));if(f){var m=t.getOffsetForIndex(s,g),p=m[0];$a(p,t.scrollOffset)||t.scrollToIndex(s,{align:g,behavior:u})}else t.scrollToIndex(s,{align:g,behavior:u})}))},this.scrollBy=function(s,a){var o=a===void 0?{}:a,i=o.behavior;t.cancelScrollToIndex(),i==="smooth"&&t.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),t._scrollToOffset(t.scrollOffset+s,{adjustments:void 0,behavior:i})},this.getTotalSize=function(){var s;return(((s=t.getMeasurements()[t.options.count-1])==null?void 0:s.end)||t.options.paddingStart)-t.options.scrollMargin+t.options.paddingEnd},this._scrollToOffset=function(s,a){var o=a.adjustments,i=a.behavior;t.options.scrollToFn(s,{behavior:i,adjustments:o},t)},this.measure=function(){t.itemSizeCache=new Map,t.notify()},this.setOptions(n),this.scrollRect=this.options.initialRect,this.scrollOffset=this.options.initialOffset,this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(function(s){t.itemSizeCache.set(s.key,s.size)}),this.maybeNotify()},rn=function(n,t,s,a){for(;n<=t;){var o=(n+t)/2|0,i=s(o);if(i<a)n=o+1;else if(i>a)t=o-1;else return o}return n>0?n-1:0};function Ua(e){for(var n=e.measurements,t=e.outerSize,s=e.scrollOffset,a=n.length-1,o=function(d){return n[d].start},i=rn(0,a,o,s),l=i;l<a&&n[l].end<s+t;)l++;return{startIndex:i,endIndex:l}}/**
 * react-virtual
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Ka=typeof document<"u"?h.useLayoutEffect:h.useEffect;function _a(e){var n=h.useReducer(function(){return{}},{})[1],t=Me({},e,{onChange:function(i){n(),e.onChange==null||e.onChange(i)}}),s=h.useState(function(){return new Ba(t)}),a=s[0];return a.setOptions(t),h.useEffect(function(){return a._didMount()},[]),Ka(function(){return a._willUpdate()}),a}function Sr(e){return _a(Me({observeElementRect:Fa,observeElementOffset:La,scrollToFn:Ha},e))}const Wa=fe.createContext(null);function ne(e,n){const{base_url:t}=Rt(),s=h.useContext(Wa);return h.useMemo(()=>{if(!e)return{};let a;e.url&&(a=Wn(e.url)?e.url:`${t}/${e.url}`);const o={previewUrl:a,downloadUrl:`${t}/api/v1/file-entries/download/${(n==null?void 0:n.downloadHashes)||e.hash}`};return s&&(o.previewUrl&&(o.previewUrl=Ct(o.previewUrl,{...s,thumbnail:n!=null&&n.thumbnail?"true":""},t)),o.downloadUrl=Ct(o.downloadUrl,s,t)),o},[t,e,n==null?void 0:n.downloadHashes,n==null?void 0:n.thumbnail,s])}function Ct(e,n,t){const s=new URL(e,t);return Object.entries(n).forEach(([a,o])=>{s.searchParams.append(a,o)}),s.toString()}const ht=fe.createContext(null);function te({message:e,className:n,allowDownload:t}){const{entries:s,activeIndex:a}=h.useContext(ht),o=s[a],i=e||r.jsx(A,{message:"No file preview available"}),{downloadUrl:l}=ne(o);return r.jsxs("div",{className:D(n,"shadow bg-paper max-w-400 w-[calc(100%-40px)] text-center p-40 rounded"),children:[r.jsx("div",{className:"text-lg",children:i}),t&&r.jsx("div",{className:"block mt-20 text-center",children:r.jsx(ee,{variant:"flat",color:"primary",onClick:()=>{l&&Je(l)},children:r.jsx(A,{message:"Download"})})})]})}function Ya(e){const{entry:n,className:t}=e,{trans:s}=Y(),{previewUrl:a}=ne(n);return a?r.jsx("img",{className:D(t,"shadow"),src:a,alt:s({message:"Preview for :name",values:{name:n.name}})}):r.jsx(te,{...e})}const qa=5242880;function Ga(e){const{entry:n,className:t}=e,{trans:s}=Y(),[a,o]=h.useState(!1),[i,l]=h.useState(!0),[u,d]=h.useState(!1),[c,g]=h.useState(null),{previewUrl:f}=ne(n);return h.useEffect(()=>{n&&(f?n.file_size>=qa?(o(!0),l(!1)):Xa(f).then(m=>{g(m.data)}).catch(()=>{d(!0)}).finally(()=>{l(!1)}):d(!0))},[n,f]),i?r.jsx(it,{isIndeterminate:!0,"aria-label":s({message:"Loading file contents"})}):a?r.jsx(te,{...e,message:r.jsx(A,{message:"This file is too large to preview."})}):u?r.jsx(te,{...e,message:r.jsx(A,{message:"There was an issue previewing this file"})}):r.jsx("pre",{className:D("rounded bg-paper p-20 text-sm whitespace-pre-wrap break-words h-full overflow-y-auto w-full",t),children:r.jsx("div",{className:"container mx-auto",children:`${c}`})})}function Xa(e){return Le.get(e,{responseType:"text",withCredentials:!1,headers:{Accept:"text/plain"}})}function Qa(e){const{entry:n,className:t}=e,{previewUrl:s}=ne(n),a=h.useRef(null),[o,i]=h.useState(!1);return h.useEffect(()=>{var l;i(!((l=a.current)!=null&&l.canPlayType(n.mime)))},[n]),o||!s?r.jsx(te,{...e}):r.jsx("video",{className:t,ref:a,controls:!0,controlsList:"nodownload noremoteplayback",playsInline:!0,autoPlay:!0,children:r.jsx("source",{src:s,type:n.mime,onError:()=>{i(!0)}})})}function Za(e){const{entry:n,className:t}=e,{previewUrl:s}=ne(n),a=h.useRef(null),[o,i]=h.useState(!1);return h.useEffect(()=>{var l;i(!((l=a.current)!=null&&l.canPlayType(n.mime)))},[n]),o||!s?r.jsx(te,{...e}):r.jsx("audio",{className:t,ref:a,controls:!0,controlsList:"nodownload noremoteplayback",autoPlay:!0,children:r.jsx("source",{src:s,type:n.mime,onError:()=>{i(!0)}})})}function Ja(e){const{entry:n,className:t}=e,{trans:s}=Y(),{previewUrl:a}=ne(n);return a?r.jsx("iframe",{title:s({message:"Preview for :name",values:{name:n.name}}),className:D(t,"w-full h-full"),src:`${a}#toolbar=0`}):r.jsx(te,{...e})}function qe(e){const{entry:n,className:t}=e,{trans:s}=Y(),a=h.useRef(null),[o,i]=h.useState(!1),l=h.useRef(),[u,d]=h.useState(!1),{previewUrl:c}=ne(n);return h.useEffect(()=>{c?n.file_size&&n.file_size>25e6?i(!0):a.current&&(a.current.onload=()=>{clearTimeout(l.current),d(!1)},er(c,n).then(g=>{a.current&&(a.current.src=g)}),l.current=setTimeout(()=>{i(!0)},5e3)):i(!0)},[n,c]),o?r.jsx(te,{...e}):r.jsxs("div",{className:D(t,"w-full h-full"),children:[u&&r.jsx(it,{}),r.jsx("iframe",{ref:a,title:s({message:"Preview for :name",values:{name:n.name}}),className:D("w-full h-full",u&&"hidden")})]})}async function er(e,n){const t=new URL(e);if(!t.searchParams.has("shareable_link")){const{data:s}=await Le.post(`file-entries/${n.id}/add-preview-token`);t.searchParams.append("preview_token",s.preview_token)}return tr(t)}function tr(e){return`https://view.officeapps.live.com/op/embed.aspx?src=${encodeURIComponent(e.toString())}`}const It={text:Ga,video:Qa,audio:Za,image:Ya,pdf:Ja,spreadsheet:qe,powerPoint:qe,word:qe,"text/rtf":te};function nr(e){const n=e==null?void 0:e.mime,t=e==null?void 0:e.type;return It[n]||It[t]||te}const sr=V(r.jsx("path",{d:"M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12l4.58-4.59z"}),"ChevronLeftOutlined"),ar=2*1024*1024;function rr({file:e,className:n,iconClassName:t,showImage:s=!0}){const{trans:a}=Y(),{previewUrl:o}=ne(e,{thumbnail:!0});if(e.file_size&&e.file_size>ar&&!e.thumbnail&&(s=!1),s&&e.type==="image"&&o){const i=a({message:":fileName thumbnail",values:{fileName:e.name}});return r.jsx("img",{className:D(n,"object-cover"),src:o,alt:i,draggable:!1})}return r.jsx(Yn,{className:t,type:e.type})}function or({entries:e,onClose:n,showHeader:t=!0,className:s,headerActionsLeft:a,allowDownload:o=!0,...i}){const l=et("(max-width: 1024px)"),[u,d]=J(i.activeIndex,i.defaultActiveIndex||0,i.onActiveIndexChange),c=e[u],g=h.useMemo(()=>({entries:e,activeIndex:u}),[e,u]),f=nr(c);if(!c)return n==null||n(),null;const m=e.length-1>u,p=()=>{d(u+1)},x=u>0,b=()=>{d(u-1)};return r.jsxs(ht.Provider,{value:g,children:[t&&r.jsx(ir,{actionsLeft:a,isMobile:l,onClose:n,onNext:m?p:void 0,onPrevious:x?b:void 0,allowDownload:o}),r.jsxs("div",{className:D("overflow-hidden relative flex-auto",s),children:[l&&r.jsx(W,{size:"lg",className:"text-muted absolute left-0 top-1/2 transform -translate-y-1/2 z-10",disabled:!x,onClick:b,children:r.jsx(Yt,{})}),r.jsx(be,{initial:!1,children:r.jsx(ce.div,{className:"absolute inset-0 flex items-center justify-center",...ot,children:r.jsx(f,{className:"max-h-[calc(100%-30px)]",entry:c,allowDownload:o})},c.id)}),l&&r.jsx(W,{size:"lg",className:"text-muted absolute right-0 top-1/2 transform -translate-y-1/2 z-10",disabled:!m,onClick:p,children:r.jsx(qt,{})})]})]})}function ir({onNext:e,onPrevious:n,onClose:t,isMobile:s,actionsLeft:a,allowDownload:o}){const{entries:i,activeIndex:l}=h.useContext(ht),u=i[l],{downloadUrl:d}=ne(u),f=s?r.jsx(W,{onClick:()=>{d&&Je(d)},children:r.jsx(jt,{})}):r.jsx(ee,{startIcon:r.jsx(jt,{}),variant:"text",onClick:()=>{d&&Je(d)},children:r.jsx(A,{message:"Download"})});return r.jsxs("div",{className:"flex items-center justify-between gap-20 bg-paper border-b flex-shrink-0 text-sm min-h-50 px-10 text-muted",children:[r.jsxs("div",{className:"flex items-center gap-4 w-1/3 justify-start",children:[a,o?f:void 0]}),r.jsxs("div",{className:"flex items-center gap-10 w-1/3 justify-center flex-nowrap text-main",children:[r.jsx(rr,{file:u,iconClassName:"w-16 h-16",showImage:!1}),r.jsx("div",{className:"whitespace-nowrap overflow-hidden overflow-ellipsis",children:u.name})]}),r.jsxs("div",{className:"w-1/3 flex items-center gap-10 justify-end whitespace-nowrap",children:[!s&&r.jsxs(h.Fragment,{children:[r.jsx(W,{disabled:!n,onClick:n,children:r.jsx(sr,{})}),r.jsx("div",{children:l+1}),r.jsx("div",{children:"/"}),r.jsx("div",{children:i.length}),r.jsx(W,{disabled:!e,onClick:e,children:r.jsx(Gn,{})}),r.jsx("div",{className:"bg-divider w-1 h-24 mx-20"})]}),r.jsx(W,{radius:"rounded-none",onClick:t,children:r.jsx(Ht,{})})]})]})}function Dr(e){return r.jsx(Ae,{size:"fullscreenTakeover",background:"bg-alt",className:"flex flex-col",children:r.jsx(lr,{...e})})}function lr(e){const{close:n}=nt();return r.jsx(or,{onClose:n,...e})}const cr={key:"type",label:I("Type"),description:I("Type of the file"),defaultOperator:ve.eq,control:{type:H.Select,defaultValue:"05",options:[{key:"02",label:I("Text"),value:"text"},{key:"03",label:I("Audio"),value:"audio"},{key:"04",label:I("Video"),value:"video"},{key:"05",label:I("Image"),value:"image"},{key:"06",label:I("PDF"),value:"pdf"},{key:"07",label:I("Spreadsheet"),value:"spreadsheet"},{key:"08",label:I("Word Document"),value:"word"},{key:"09",label:I("Photoshop"),value:"photoshop"},{key:"10",label:I("Archive"),value:"archive"},{key:"11",label:I("Folder"),value:"folder"}]}},Pr=[cr,{key:"public",label:I("Visibility"),description:I("Whether file is publicly accessible"),defaultOperator:ve.eq,control:{type:H.Select,defaultValue:"01",options:[{key:"01",label:I("Private"),value:!1},{key:"02",label:I("Public"),value:!0}]}},ys({description:I("Date file was uploaded")}),ws({description:I("Date file was last changed")}),{key:"owner_id",label:I("Uploader"),description:I("User that this file was uploaded by"),defaultOperator:ve.eq,control:{type:H.SelectModel,model:za}}],Er=V(r.jsx("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"}),"ArrowBackOutlined"),Tr=V(r.jsx("path",{d:"M12 5.83 15.17 9l1.41-1.41L12 3 7.41 7.59 8.83 9 12 5.83zm0 12.34L8.83 15l-1.41 1.41L12 21l4.59-4.59L15.17 15 12 18.17z"}),"UnfoldMoreOutlined");export{ct as $,Ve as A,We as B,la as C,fr as D,Sr as E,ve as F,_s as G,Pr as H,ea as I,Dr as J,Yt as K,Cr as L,Ir as M,Js as N,Zt as O,Zs as P,Tr as Q,Er as R,Bs as S,pr as T,za as U,ne as V,rr as W,G as X,or as Y,Wa as Z,cr as _,gr as a,sn as a0,Ms as a1,Te as a2,Sa as a3,fa as a4,Xt as a5,Ut as a6,ts as a7,hs as a8,ut as a9,Fs as aa,Wt as ab,sr as ac,Zn as ad,mr as b,hr as c,H as d,ys as e,qt as f,Ss as g,Us as h,vr as i,xr as j,Je as k,jt as l,br as m,yr as n,ta as o,Ts as p,Ca as q,ia as r,jr as s,kr as t,ws as u,Pa as v,Ie as w,wr as x,oa as y,ft as z};
//# sourceMappingURL=UnfoldMore-d3e3f3ab.js.map
